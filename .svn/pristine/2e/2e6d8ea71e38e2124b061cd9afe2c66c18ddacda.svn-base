webpackJsonp([38],{kDo0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("fZjL"),n=i.n(a),s={name:"whole-order",data:function(){return{columns_1:[],columns_2:[],columns_3:[],columns_4:[],data_1:[],data_2:[],data_3:[],data_4:[],gaugeWidth:0,optionName:["春季订单分析","五一订单分析","旺季订单分析"]}},props:{title:{type:String,required:!0},allData:{type:Array,required:!0},loading:{type:Boolean,default:!1},vip:{type:String,default:"total"}},created:function(){var t=this;switch(this.columns_1=[{title:"对比任务名称",key:"display_name",align:"center",minWidth:150},{title:"总销售额",key:"sales_amount",align:"center",minWidth:150},{title:"平均客单价",key:"avg_transaction_value",align:"center",minWidth:150},{title:"平均客单件",key:"avg_transaction_unit",align:"center",minWidth:150},{title:"平均件单价",key:"avg_unit_value",align:"center",minWidth:150},{title:"联单率",key:"joint_purchase_rate",align:"center",minWidth:150},{title:"平均折扣率",key:"joint3_purchase_scale",align:"center",minWidth:150}],this.vip){case"total":this.columns_1.push({title:"新会员人数",key:"new_vip_count",align:"center",minWidth:150},{title:"新会员转化率",key:"new_vip_case_rate",align:"center",minWidth:150},{title:"新会员占比",key:"new_vip_rate",align:"center",minWidth:150},{title:"老会员人数",key:"old_vip_count",align:"center",minWidth:150},{title:"老会员占比",key:"old_vip_rate",align:"center",minWidth:150});break;case"nonVip":break;case"oldVip":this.columns_1.push({title:"老会员人数",key:"old_vip_count",align:"center",minWidth:150});break;case"newVip":this.columns_1.push({title:"新会员人数",key:"new_vip_count",align:"center",minWidth:150})}this.columns_2=[{title:"对比任务名称",key:"display_name",align:"center",width:180}],this.columns_3=[{title:"对比任务名称",key:"display_name",align:"center",width:180}],this.columns_4=[{title:"对比任务名称",key:"display_name",align:"center",width:180}];for(var e=1;e<=10;e++)this.columns_2.push({title:"Top"+e,key:"top"+e,minWidth:200,align:"center"}),this.columns_3.push({title:"Top"+e,key:"top"+e,minWidth:200,align:"center"}),this.columns_4.push({title:"Top"+e,key:"top"+e,minWidth:200,align:"center"});this.allData.forEach(function(e,i){t.data_2[i]={display_name:e.display_name},e.top10_by_unit.forEach(function(e,a){t.data_2[i]["top"+(+a+1)]=n()(e)[0]}),t.data_3[i]={display_name:e.display_name},e.top10_by_value.forEach(function(e,a){t.data_3[i]["top"+(+a+1)]=n()(e)[0]}),t.data_4[i]={display_name:e.display_name},e.category_distribution.forEach(function(e,a){a>10||(t.data_4[i]["top"+(+a+1)]=n()(e)[0])})}),this.data_1=this.allData.map(function(t){return{display_name:t.display_name,sales_amount:t.sales_amount,avg_transaction_value:t.avg_transaction_value,avg_transaction_unit:t.avg_transaction_unit,avg_unit_value:t.avg_unit_value,joint_purchase_rate:t.joint_purchase_rate,joint3_purchase_scale:t.joint3_purchase_scale,vip_order_scale:t.vip_order_scale,vip_sales_scale:t.vip_sales_scale,new_vip_count:t.new_vip_count,new_vip_case_rate:t.new_vip_case_rate,new_vip_rate:t.new_vip_rate,old_vip_count:t.old_vip_count,old_vip_rate:t.old_vip_rate}})},mounted:function(){var t=this;this.resize();var e=this.echarts.init(document.getElementById("main_1")),i=this.echarts.init(document.getElementById("main_2")),a=this.echarts.init(document.getElementById("main_3")),s=this.echarts.init(document.getElementById("main_4")),o=this.echarts.init(document.getElementById("main_5")),r=this.echarts.init(document.getElementById("main_6")),l=this.echarts.init(document.getElementById("main_7")),d=this.echarts.init(document.getElementById("main_8")),c={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"退货率"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},xAxis:{type:"category",data:["订单销售额退货率","订单总销量退货率"]},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},series:[]},_={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"会员订单占比"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},xAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},yAxis:{type:"category",data:["会员订单","非会员订单"]},series:[]},h={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"会员金额占比"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},xAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},yAxis:{type:"category",data:["会员订单","非会员订单"]},series:[]},p={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"联单件数占比分析"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},xAxis:{type:"category",data:["联单件数5件以上占比","联单件数3件以上占比","联单件数2件占比","联单件数1件占比"]},series:[]},u={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"商品偏好-季节分布"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},xAxis:{type:"category",data:this.allData[0].season_distribution.map(function(t){return n()(t)[0]})},series:[]};this.allData[0].season_distribution.length||(delete u.legend,u.title={text:"商品偏好-季节分布\n\n\n( 暂无数据 )",x:"center",y:"center",textStyle:{fontWeight:"bold",fontSize:25}});var m={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"商品偏好-价格带分布"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},xAxis:{type:"category",data:this.allData[0].price_range_distribution.map(function(t){return n()(t)[0]})},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},series:[]};this.allData[0].price_range_distribution.length||(delete m.legend,m.title={text:"商品偏好-价格带分布\n\n\n( 暂无数据 )",x:"center",y:"center",textStyle:{fontWeight:"bold",fontSize:25}});var g={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"商品偏好-色系分布"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},xAxis:{type:"category",data:this.allData[0].color_distribution.map(function(t){return n()(t)[0]})},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},series:[]};this.allData[0].color_distribution.length||(delete g.legend,g.title={text:"商品偏好-色系分布\n\n\n( 暂无数据 )",x:"center",y:"center",textStyle:{fontWeight:"bold",fontSize:25}});var y={color:["#3398DB","#67E0E3","#FFDB5C"],title:{text:"商品偏好-面料分布"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.optionName},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0,backgroundColor:"red"},xAxis:{type:"category",data:this.allData[0].fabric_distribution.map(function(t){return n()(t)[0]})},yAxis:{type:"value",axisLabel:{show:!0,formatter:"{value}%"}},series:[]};this.allData[0].fabric_distribution.length||(delete y.legend,y.title={text:"商品偏好-面料分布\n\n\n( 暂无数据 )",x:"center",y:"center",textStyle:{fontWeight:"bold",fontSize:25}}),this.allData.forEach(function(e,i){c.series[i]={name:t.optionName[i],barWidth:30,barGap:"0%",legendHoverLink:!0,type:"bar",data:[100*e.total_sales_return_rate,100*e.total_count_return_rate]},_.series[i]={name:t.optionName[i],barWidth:30,barGap:"10%",legendHoverLink:!0,type:"bar",data:[100*e.vip_order_scale,100*e.non_vip_order_scale]},h.series[i]={name:t.optionName[i],barWidth:30,barGap:"10%",legendHoverLink:!0,type:"bar",data:[100*e.vip_sales_scale,100*e.non_vip_sales_scale]},p.series[i]={name:t.optionName[i],barWidth:30,barGap:"10%",legendHoverLink:!0,type:"bar",data:[e.joint5_purchase_scale,e.joint3_purchase_scale,e.joint2_purchase_scale,e.joint1_purchase_scale]},u.series[i]={name:t.optionName[i],barWidth:"20%",barGap:"20%",legendHoverLink:!0,type:"bar",data:e.season_distribution.map(function(t){return t[n()(t)[0]]})},m.series[i]={name:t.optionName[i],barWidth:"20%",barGap:"0%",legendHoverLink:!0,type:"bar",data:e.price_range_distribution.map(function(t){return t[n()(t)[0]]})},g.series[i]={name:t.optionName[i],barWidth:"20%",barGap:"0%",legendHoverLink:!0,type:"bar",data:e.color_distribution.map(function(t){return t[n()(t)[0]]})},y.series[i]={name:t.optionName[i],barWidth:"20%",barGap:"0%",legendHoverLink:!0,type:"bar",data:e.fabric_distribution.map(function(t){return t[n()(t)[0]]})}}),e.setOption(c),i.setOption(_),a.setOption(h),s.setOption(p),o.setOption(u),r.setOption(m),l.setOption(g),d.setOption(y),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){this.gaugeWidth=this.$refs.win.clientWidth-38,document.getElementById("main_1").style.width=.5*this.gaugeWidth+"px",document.getElementById("main_2").style.width=.5*this.gaugeWidth+"px",document.getElementById("main_3").style.width=.5*this.gaugeWidth+"px",document.getElementById("main_4").style.width=.5*this.gaugeWidth+"px",document.getElementById("main_5").style.width=.5*this.gaugeWidth+"px",document.getElementById("main_6").style.width=.5*this.gaugeWidth+"px",document.getElementById("main_7").style.width=.5*this.gaugeWidth+"px",document.getElementById("main_8").style.width=.5*this.gaugeWidth+"px"}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"win",staticClass:"whole-order"},[t.loading?i("Spin",{staticStyle:{margin:"auto"},attrs:{size:"large"}}):i("Row",[i("Row",{staticClass:"padding16-18",staticStyle:{background:"white","font-size":"18px","font-weight":"600",color:"#000"}},[i("i-col",{staticStyle:{"font-size":"18px","font-weight":"600"},attrs:{span:"6"}},[t._v("\n              "+t._s(t.title)+"\n          ")]),t._v(" "),i("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"5",offset:"13"}},[i("i",{staticClass:"el-icon-download",staticStyle:{"font-weight":"700","font-size":"25px","margin-right":"20px",cursor:"pointer"}}),t._v(" "),i("i",{staticClass:"el-icon-question",staticStyle:{"font-weight":"700","font-size":"25px",cursor:"pointer"}})])],1),t._v(" "),i("Card",{attrs:{"dis-hover":""}},[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("订单分析-整体订单")]),t._v(" "),i("Table",{staticClass:"table-css",attrs:{width:t.gaugeWidth,border:"",columns:t.columns_1,data:t.data_1}})],1),t._v(" "),i("Card",{attrs:{"dis-hover":""}},[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("订单分析-销售数量款色TOP10")]),t._v(" "),i("Table",{staticClass:"table-css",attrs:{width:t.gaugeWidth,border:"",columns:t.columns_2,data:t.data_2}})],1),t._v(" "),i("Card",{attrs:{"dis-hover":""}},[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("订单分析-销售金额款色TOP10")]),t._v(" "),i("Table",{staticClass:"table-css",attrs:{width:t.gaugeWidth,border:"",columns:t.columns_3,data:t.data_3}})],1),t._v(" "),i("Card",{attrs:{"dis-hover":""}},[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("订单分析-销售品类Top10")]),t._v(" "),i("Table",{staticClass:"table-css",attrs:{width:t.gaugeWidth,border:"",columns:t.columns_4,data:t.data_4}})],1),t._v(" "),i("i-col",{staticClass:"padding16-18 echart",staticStyle:{"justify-content":"space-between","flex-wrap":"wrap"},attrs:{span:"24"}},[i("div",{staticClass:"flex"},[i("div",{staticStyle:{height:"550px"},attrs:{id:"main_1"}}),t._v(" "),i("div",{staticStyle:{height:"550px"},attrs:{id:"main_4"}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"total"===t.vip,expression:"vip==='total'"}],staticClass:"flex"},[i("div",{staticStyle:{height:"300px"},attrs:{id:"main_2"}}),t._v(" "),i("div",{staticStyle:{height:"300px"},attrs:{id:"main_3"}})]),t._v(" "),i("Card",{staticStyle:{"margin-top":"30px"},attrs:{"dis-hover":""}},[i("p",{staticClass:"rbg",staticStyle:{"text-indent":"15px"},attrs:{slot:"title"},slot:"title"},[t._v("商品偏好系列")]),t._v(" "),i("div",{staticClass:"flex",staticStyle:{"flex-wrap":"wrap"}},[i("div",{staticStyle:{height:"400px"},attrs:{id:"main_5"}}),t._v(" "),i("div",{staticStyle:{height:"400px"},attrs:{id:"main_6"}}),t._v(" "),i("div",{staticStyle:{height:"400px"},attrs:{id:"main_7"}}),t._v(" "),i("div",{staticStyle:{height:"400px"},attrs:{id:"main_8"}})])])],1)],1)],1)},staticRenderFns:[]};var r={data:function(){return{title:"",allData:[],menu:[],active_name:0,loading:!1,dimension:["total","nonVip","oldVip","newVip"],show:!1}},components:{WholeOrder:i("VU/8")(s,o,!1,function(t){i("rnKj")},"data-v-075d94a8",null).exports},created:function(){this.menu=["整体订单","非会员消费订单","老会员消费订单","新会员消费订单"],this.getData()},mounted:function(){},methods:{getData:function(){var t=this;this.show=!1,this.$https.analysisKanban.detailView({dimension:this.dimension[this.active_name],taskIds:this.$route.query.code}).then(function(e){t.allData=e.data.data,t.title=t.allData.map(function(t){return t.display_name}).toString(),t.show=!0})},menuSelect:function(t){this.active_name!==t&&(this.active_name=t,this.getData())},back:function(){this.$router.go(-1)}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",{staticStyle:{padding:"16px 24px","background-color":"white"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[i("i-col",{staticStyle:{"background-color":"white"}},[i("span",{on:{click:t.back}},[i("Icon",{staticStyle:{"margin-top":"-5px","margin-right":"5px"},attrs:{type:"md-arrow-back",size:"24",color:"rgba(23,35,61,0.55)"}})],1),t._v(" "),i("span",{staticStyle:{"font-size":"20px"}},[t._v("\n               【 "+t._s(t.title)+" 】\n            ")])])],1),t._v(" "),i("div",{staticClass:"slide-scroll-box"},[i("div",{staticClass:"page-title bottom-shadow page-title-tab"},[i("Menu",{staticClass:"pl24",attrs:{mode:"horizontal",theme:"light","active-name":t.active_name},on:{"on-select":t.menuSelect}},t._l(t.menu,function(e,a){return i("MenuItem",{key:a,attrs:{name:a}},[t._v(t._s(e))])}))],1),t._v(" "),t.show?i("whole-order",{attrs:{title:t.menu[t.active_name],loading:t.loading,allData:t.allData,vip:this.dimension[this.active_name]}}):t._e()],1)],1)},staticRenderFns:[]},d=i("VU/8")(r,l,!1,null,null,null);e.default=d.exports},rnKj:function(t,e){}});