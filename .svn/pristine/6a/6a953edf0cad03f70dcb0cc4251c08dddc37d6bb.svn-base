webpackJsonp([25],{"65WL":function(t,e){},gmFX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("CFN8"),i={data:function(){return{title:"订单分析-新增营销对比",saveBtnStatus:!1,loading:!1,columns:[],hasChanged:!1,calculate_status_item:["未开始","活动开始","活动结束"]}},props:{showData:{type:Array,default:[]}},components:{editTitle:n.a},created:function(){var t=this;this.$createElement;this.columns=[{title:"任务名称",key:"display_name"},{title:"任务ID",key:"code",align:"center"},{title:"交易起止时间",align:"center",minWidth:90,render:function(t,e){return t("div",[e.row.start_time_day," 至 ",e.row.end_time_day])}},{title:"状态",align:"center",render:function(e,a){return e("div",[t.calculate_status_item[a.row.calculate_status]])}},{title:"创建时间",minWidth:80,align:"center",render:function(t,e){return t("div",[new Date(e.row.create_time).toLocaleString()])}}]},mounted:function(){},methods:{cancel:function(){this.$emit("cancelCreatEvent",!1)},ok:function(){this.$emit("submitCreatEvent")}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slide-create-box"},[a("edit-title",{attrs:{loading:t.saveBtnStatus,title:t.title,disabled:t.hasChanged},on:{"cancel-click":t.cancel,"ok-click":t.ok}}),t._v(" "),a("div",{staticClass:"slide-scroll-box dialog-padding20"},[a("Card",{staticClass:"pl20 pr20",attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("新增成功后需要前往"),a("span",{staticStyle:{color:"#57A3F3",display:"inline-block",transform:"translateY(-1.5px)"}},[t._v("订单分析看板")]),t._v("查看")]),t._v(" "),a("p",{staticClass:"padding16-18",staticStyle:{"font-size":"15px","font-weight":"600"}},[t._v("新增如下对比任务：")]),t._v(" "),a("Table",{ref:"table",staticClass:"smce-table-noscroll td-table-no-border",attrs:{loading:t.loading,"no-data-text":"没有可对比的数据",columns:t.columns,data:t.showData}})],1)],1)],1)},staticRenderFns:[]};var r={name:"Group",data:function(){return{name:"",current:1,pageSize:10,butData:["全部"],loading:!1,creatEvent:!1,calculate_status_item:["未开始","活动开始","活动结束"],columns:[],data:[],allData:[],allDataSize:0,dataChild:[]}},components:{CreateEvent:a("VU/8")(i,s,!1,function(t){a("65WL")},"data-v-22613e14",null).exports},created:function(){this.getData();var t=this.$config.debounce_wait;this.debounceSearch=this.$lodash.debounce(this.changeInput,t),this.debouncePage=this.$lodash.debounce(this.pageChange,t)},methods:{getData:function(){var t=this;return this.loading=!0,this.$axios.get("/cdp-web/marketplugin/orderAnalysis/queryOrderList",{params:{displayName:this.name,page:this.current,rows:this.pageSize}}).then(function(e){t.data=e.data.data,t.data.forEach(function(t){t.action=!1}),t.dataChild.length>0&&t.dataChild.forEach(function(e){var a=t.data.find(function(t){return t.code===e.code});a&&(a.action=!0)}),t.tableColumn(),t.allDataSize=e.data.pageInfo.total,t.loading=!1})},tableColumn:function(){var t=this;this.$createElement;this.columns=[{title:"任务名称",key:"display_name",width:"200px"},{title:"任务ID",key:"code",align:"center"},{title:"交易起止时间",align:"center",minWidth:80,render:function(t,e){return t("div",[e.row.start_time_day," 至 ",e.row.end_time_day])}},{title:"状态",align:"center",render:function(e,a){return e("div",[t.calculate_status_item[a.row.calculate_status]])}},{title:"创建时间",align:"center",render:function(t,e){return t("div",[new Date(e.row.create_time).toLocaleString()])}},{title:"选择",width:150,align:"center",render:function(e,a){return e("Checkbox",{on:{"on-change":function(){t.checkChange(a)}},props:{value:a.row.action,disabled:!a.row.calculate_status}})}}]},changeInput:function(){this.current=1,this.getData()},checkChange:function(t){if(this.data[t.index].action=!this.data[t.index].action,this.data[t.index].action)this.dataChild.push(this.data[t.index]);else{var e=this.data[t.index].code;this.dataChild.splice(this.dataChild.findIndex(function(t){return t.id===e}),1)}},addData:function(){this.dataChild.length>3?this.$Message.error({background:!0,content:"最大对比条数不得超过3条~~"}):this.creatEvent=!0},pageChange:function(t){this.current=t,this.getData()},cancelCreat:function(t){this.creatEvent=t},submitCreat:function(){var t=this;this.$axios.post("/cdp-web/marketplugin/orderAnalysis/addOrderComparedTask",{taskIds:this.dataChild.map(function(t){return t.code}).toString()},{headers:{"Content-Type":"application/json"}}).then(function(e){switch(e.data.success){case"true":t.$Message.success({background:!0,content:e.data.msg});break;default:t.$Message.error({background:!0,content:e.data.msg})}}),this.creatEvent=!1}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-warpper"},[a("div",{staticClass:"page-title bottom-shadow page-title-tab"},[a("Menu",{staticClass:"pl24",attrs:{mode:"horizontal",theme:"light","active-name":1}},[a("MenuItem",{key:0,attrs:{name:1}},[t._v("订单分析对比管理")])],1)],1),t._v(" "),a("div",{staticClass:"page-content page-content-tab padding16-18"},[a("Card",{attrs:{"dis-hover":""}},[a("Row",{staticClass:"code-row-bg padding16-18",attrs:{type:"flex",justify:"space-between"}},[a("i-col",[a("Button-group",t._l(t.butData,function(e){return a("i-button",{key:e,attrs:{type:"primary"}},[t._v(t._s(e))])})),t._v(" "),a("i-input",{staticClass:"width300",attrs:{icon:"ios-search",placeholder:"输入任务名称"},on:{input:t.debounceSearch},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),t.dataChild.length?a("span",{staticStyle:{"padding-left":"10px"}},[t._v("\n              当前已选中的任务：\n              "),t._l(t.dataChild,function(e){return a("span",{key:e.code,staticStyle:{"font-weight":"600"}},[t._v("\n              "+t._s(e.code)+"、\n          ")])})],2):t._e()],1),t._v(" "),a("i-col",[a("i-button",{attrs:{size:"large",disabled:!t.dataChild.length,icon:"md-add",type:"primary"},on:{click:t.addData}},[t._v("对比")])],1)],1),t._v(" "),a("Table",{ref:"table",staticClass:"smce-table-noscroll td-table-no-border",attrs:{loading:t.loading,"no-data-text":"暂无数据",columns:t.columns,data:t.data}}),t._v(" "),a("Page",{staticClass:"mt16 padding16-18 ivu-row-flex ivu-row-flex-end",attrs:{current:t.current,"page-size":t.pageSize,total:t.allDataSize,"show-elevator":""},on:{"on-change":t.debouncePage}})],1)],1),t._v(" "),a("Drawer",{attrs:{width:"1100","mask-closable":!1},model:{value:t.creatEvent,callback:function(e){t.creatEvent=e},expression:"creatEvent"}},[t.creatEvent?a("create-event",{attrs:{showData:t.dataChild},on:{cancelCreatEvent:t.cancelCreat,submitCreatEvent:t.submitCreat}}):t._e()],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,c,!1,function(t){a("vr2c")},"data-v-7d70b5c7",null);e.default=o.exports},vr2c:function(t,e){}});