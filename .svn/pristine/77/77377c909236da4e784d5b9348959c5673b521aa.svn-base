webpackJsonp([1,5],{"0SNW":function(t,e){},"3P/q":function(t,e){},"4Y8Y":function(t,e){},D6t2:function(t,e){},DD2A:function(t,e){},DhtS:function(t,e,a){"use strict";var i={props:{row:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{},components:{},mounted:function(){},methods:{dropMenu:function(t){var e=t.split(",")[0],a=t.split(",")[1];switch(e){case"detail":this.$router.push({path:"/activity/detail",query:{name:"detail"}}),this.$config.interactive_type=a;break;case"stop":this.$Message.info("stop");break;case"end":this.$Message.info("end");break;case"copy":this.$Message.info("copy");break;case"del":this.$Message.info("del")}}},watch:{},destroyed:function(){}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a",{on:{click:function(e){t.dropMenu("detail,"+t.row.type_val)}}},[t._v("\n                详情\n            ")]),t._v(" "),a("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.dropMenu}},[a("a",{attrs:{href:"javascript:void(0)"}},[a("Icon",{attrs:{type:"md-more"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"stop,"+t.row.id}},[t._v("\n                暂停\n            ")]),t._v(" "),a("DropdownItem",{attrs:{name:"end,"+t.row.id}},[t._v("\n                结束\n            ")]),t._v(" "),a("DropdownItem",{attrs:{name:"copy,"+t.row.id}},[t._v("\n                克隆\n            ")]),t._v(" "),a("DropdownItem",{attrs:{name:"del,"+t.row.id}},[t._v("\n                删除\n            ")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("D6t2")},"data-v-9cfbc1d4",null);e.a=n.exports},"LgD+":function(t,e){},NpMN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("VwQ4"),s=a("DhtS"),n=a("tvCr"),l=a("mps7"),o={name:"List",props:{},data:function(){return{creatUnit:!1,line:"line",total:0,currentPage:1,title:"新建投放单元",breadcrumb:["年货节-超级秒杀日，最低1折起","金卡会员活动期间满1000减80"],returnList:{},unitName:"",loading:!1,portrayal:["City","People","Cost","Life","Entertainment"],unitData:{data:[{id:"1",name:"金卡会员活动期间满1000减80",crowd_name:"金卡会员",crowd_count:"560901",type:"单次通知",type_val:"0",start_date:"立即投放",creater:"周树天",channel_type:"短信",state:"草稿",marketingType:"0"},{id:"2",name:"银卡会员活动期间满500减30",crowd_name:"银卡会员",crowd_count:"679032",type:"周期性通知",type_val:"2",start_date:"立即投放",creater:"孙笑笑",channel_type:"短信",state:"待内审",marketingType:"1"},{id:"3",name:"第3季度累计购物满2千抽腕表",crowd_name:"普通会员",crowd_count:"989224",type:"日期通知",type_val:"3",start_date:"每月1日",date:"2018-10-21  08:50",creater:"张成立",channel_type:"微信",state:"待测试",marketingType:"0"},{id:"1",name:"新用户关注公众号送20元优惠券",crowd_name:"微信新用户",crowd_count:"55922",type:"事件响应",type_val:"1",start_date:"立即投放",creater:"李晓晴",channel_type:"微信",state:"投放中",marketingType:"0"},{id:"1",name:"金卡会员当月购物满2千抽大奖",crowd_name:"刷卡满2千金卡会员",crowd_count:"5800",type:"事件响应",type_val:"1",start_date:"立即投放",creater:"李晓晴",channel_type:"微信",state:"暂停中",marketingType:"1"},{id:"2",name:"银卡会员当月购物满5次送50元券",crowd_name:"刷卡满5次银卡会员",crowd_count:"70922",type:"周期性通知",type_val:"2",start_date:"每月1日",date:"2018-10-21  08:50",creater:"李晓晴",channel_type:"短信",state:"待开始",marketingType:"0"},{id:"0",name:"普通会员购物满3免1",crowd_name:"普通会员",crowd_count:"90228",type:"单次通知",type_val:"0",start_date:"立即投放",creater:"李晓晴",channel_type:"短信",state:"已过期",marketingType:"1"}],columns:[{title:"投放单元名称",key:"name",ellipsis:!0,tooltip:!0},{title:"目标人群",key:"crowd_name",ellipsis:!0,tooltip:!0},{title:"预估人数",key:"crowd_count"},{title:"交互模式",ellipsis:!0,tooltip:!0,width:150,render:function(t,e){var a="";switch(e.row.marketingType){case"0":a="md-notifications-outline";break;case"1":a="md-ribbon"}return t("div",[t("Icon",{style:{color:"#19be6b",padding:"0 5px",fontSize:"16px"},props:{type:a}}),t("span",e.row.type)])}},{title:"投放时间",ellipsis:!0,tooltip:!0,width:150,render:function(t,e){var a=e.row.start_date,i="",s=e.row.date;switch(a){case"立即投放":i="ios-information-circle-outline",s="活动时间内，审核通过后立即发送";break;case"每月1日":i="md-time",s="2019年4月2日 9:00"}return t("Poptip",{props:{trigger:"hover",placement:"bottom"}},[t("span",a),t("Icon",{style:{color:"#19be6b",padding:"0 4px",fontSize:"16px"},props:{type:i}}),t("div",{slot:"content"},[t("span",s)])])}},{title:"创建人",key:"creater",ellipsis:!0,tooltip:!0},{title:"投放渠道",key:"channel_type",ellipsis:!0,tooltip:!0,render:function(t,e){var a=e.row.channel_type,i=void 0;switch(a){case"短信":i="亿美短信渠道";break;case"微信":i="微信小程序1"}return t("Poptip",{props:{trigger:"hover",placement:"bottom"}},[t("span",a),t("Icon",{style:{color:"#19be6b",padding:"0 4px"}}),t("div",{slot:"content"},[t("span",i)])])}},{title:"状态",ellipsis:!0,tooltip:!0,render:function(t,e){return t("div",[t("span",e.row.state)])}},{title:"操作",width:120,render:function(t,e){return t(s.a,{props:{row:e.row}})}}]},activityDetail:{id:"CM19011469",creater:"李晓晴",creatTime:"2019-01-12",activityDate:["2016-01-01","2016-02-15"],description:"年货节期间，任意一笔满399元订单均可参加年货节大转盘抽奖活动，有几率赢取1折大奖！"},state:[{name:"预计触达",value:"999,999"},{name:"实际触达",value:"856,566"},{name:"触达失败",value:"143,433"}],cityList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],model1:"",defineEditShow:!0,nameEditShow:!0,formItem:{name:"年货节-超级秒杀日，最低1折起",description:"888"}}},computed:{},components:{Detail:i.default,OperationUnit:s.a,Creat:n.a,EditInput:l.a},created:function(){var t=this.$config.debounce_wait;this.debounceSearch=this.$lodash.debounce(this.searIconClick,t)},mounted:function(){this.initData()},methods:{initData:function(){this.returnList={path:"/activity",query:{}}},ok:function(){this.creatUnit=!1},searIconClick:function(){},cancel:function(t){this.creatUnit=t},changePage:function(){},cancelEdit:function(){this.nameEditShow=!0,this.defineEditShow=!0,this.$tools.bus.$emit("recovery-edit")},confirmInfo:function(t,e){if("name"===t){if(""===e)return this.$Message.destroy(),this.$Message.error("请输入名称"),void(this.nameEditShow=!1);if(!this.$config.reg_input.reg.test(e))return this.$Message.destroy(),void this.$Message.error("只支持中英文、数字、下划线，请正确填写");this.nameEditShow=!0,this.formItem[t]=e}"description"==t&&this.formItem.description===e||(this.defineEditShow=!0,this.formItem[t]=e)},changeStatus:function(t,e){this[e]=t}},watch:{},destroyed:function(){}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertising-list w100 h100"},[a("Row",{staticClass:"details-title",attrs:{type:"flex",justify:"space-between"}},[a("Col",[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:t.returnList}},[t._v("返回列表")]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.breadcrumb[0]))])],1)],1)],1),t._v(" "),a("div",{staticClass:"scroll-wrap"},[a("Card",{staticClass:"m10",attrs:{"dis-hover":""}},[a("Form",{ref:"formArea",attrs:{"label-position":"left",model:t.formItem}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Row",{staticClass:"detail-height"},[a("Col",{attrs:{span:"2"}},[a("p",[t._v("活动名称：")])]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("edit-input",{staticStyle:{"margin-bottom":"0"},attrs:{"max-length":20,label:"","default-placeholder":"请输入名称，20字以内","label-name":"name",tipContent:t.formItem.name,content:t.formItem.name,"edit-show":t.nameEditShow},on:{"cancel-edit":t.cancelEdit,"confirm-info":t.confirmInfo,"change-status":function(e){return t.changeStatus(e,"nameEditShow")}}})],1),t._v(" "),a("Col",{attrs:{span:"2"}},[a("p",[t._v("活动ID：")])]),t._v(" "),a("Col",{attrs:{span:"5"}},[a("p",{staticClass:"color-blue"},[t._v(t._s(t.activityDetail.id))])]),t._v(" "),a("Col",{attrs:{span:"2"}},[a("p",[t._v("创建人：")])]),t._v(" "),a("Col",{attrs:{span:"3"}},[a("p",{staticClass:"color-blue"},[t._v(t._s(t.activityDetail.creater))])])],1),t._v(" "),a("Row",{staticClass:"detail-height"},[a("Col",{attrs:{span:"2"}},[a("p",[t._v("创建时间：")])]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("p",{staticClass:"color-blue"},[t._v(" "+t._s(t.activityDetail.creatTime))])]),t._v(" "),a("Col",{attrs:{span:"3"}},[a("p",[t._v("活动起止时间：")])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"daterange",transfer:"","show-week-numbers":"",placement:"bottom-end",placeholder:"Select date",value:t.activityDetail.activityDate}})],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Row",[a("Col",{attrs:{span:"3"}},[a("p",{staticStyle:{"margin-top":"8px"}},[t._v("描述：")])]),t._v(" "),a("Col",{attrs:{span:"21"}},[a("edit-input",{staticStyle:{"margin-bottom":"0"},attrs:{"max-length":100,textarea:"textarea",label:"","default-placeholder":"请输入描述，100字以内","label-name":"description",inputWidth:400,"size-obj":{maxRows:5,minRows:3},tipContent:t.formItem.description,content:t.formItem.description,"edit-show":t.defineEditShow},on:{"cancel-edit":t.cancelEdit,"confirm-info":t.confirmInfo,"change-status":function(e){return t.changeStatus(e,"defineEditShow")}}})],1)],1)],1)],1)],1)],1),t._v(" "),a("Card",{staticClass:"m10",attrs:{"dis-hover":""}},[a("Row",{staticClass:"text-align-c "},t._l(t.state,function(e,i){return a("Col",{key:i,class:2!==i?t.line:"",attrs:{span:"8"}},[a("p",{staticClass:"f20 color-blue"},[t._v(t._s(e.value))]),t._v(" "),a("p",{staticClass:"pt10"},[t._v(t._s(e.name))])])}))],1),t._v(" "),a("Card",{staticClass:"m10",attrs:{"dis-hover":""}},[a("Row",{staticClass:"mt10"},[a("Col",{attrs:{span:"3"}},[a("Select",{staticStyle:{width:"140px"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.cityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Col",{attrs:{span:"3"}},[a("Select",{staticStyle:{width:"140px","margin-left":"10px"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.cityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Input",{staticClass:"dependant-search",attrs:{placeholder:"请输入投放单元名称",icon:"ios-search"},on:{"on-change":t.debounceSearch},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.debounceSearch(e):null}},model:{value:t.unitName,callback:function(e){t.unitName=e},expression:"unitName"}}),t._v(" "),a("span",{staticClass:"total-count"},[t._v("共"),a("i",[t._v("55")]),t._v("个投放单元")])],1),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"3"}},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(e){t.creatUnit=!0}}},[t._v("新建投放单元")]),t._v(" "),a("Drawer",{attrs:{width:"800","mask-closable":!1},model:{value:t.creatUnit,callback:function(e){t.creatUnit=e},expression:"creatUnit"}},[t.creatUnit?a("Creat",{attrs:{title:t.title},on:{cancelCreateUnit:t.cancel,submitCreateUnit:t.ok}}):t._e()],1)],1)],1),t._v(" "),a("Table",{staticClass:"mt20",attrs:{loading:t.loading,columns:t.unitData.columns,data:t.unitData.data}}),t._v(" "),a("Page",{staticClass:"page-style",attrs:{total:t.total,current:t.currentPage,"show-elevator":""},on:{"on-change":t.changePage}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,r,!1,function(t){a("iGeD")},"data-v-79a58584",null);e.default=c.exports},Ok9J:function(t,e){},Ol4v:function(t,e){},QoKC:function(t,e){},VwQ4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-touch mt20"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{staticStyle:{flex:"1"}},[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("选定触达人群\n                "),a("Tooltip",{attrs:{"max-width":"300",content:"选择一个投放人群，如果是响应形式的可以跳过",placement:"right"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("div",[a("Row",[a("Col",{attrs:{span:"3"}},[t._v("\n                        目标人群：\n                    ")]),t._v(" "),a("Col",{attrs:{span:"13"}},[a("TraitInput",t._b({staticClass:"touch-trait",attrs:{placeholder:"请选择人群",value:t.crowdValue},on:{"on-change":t.updateCrowd}},"TraitInput",t.crowdData,!1))],1)],1),t._v(" "),a("Row",{staticClass:"mt10"},[a("Col",{attrs:{span:"3"}},[t._v("\n                        投放排除：\n                    ")]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("TraitInput",t._b({attrs:{placeholder:"添加人群",closable:!0,count:10,btnType:!0,btnText:"添加人群",isShowTagList:!0,multiple:!0,value:t.crowdValue},on:{"on-change":t.setObject}},"TraitInput",t.crowdParams,!1))],1)],1),t._v(" "),a("Row",{staticClass:"mt10"},[a("Col",{attrs:{span:"3"}},[t._v("\n                        渠道排除：\n                    ")]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("i-switch",{on:{"on-change":t.changeChannelRemoval},model:{value:t.channelRemoval,callback:function(e){t.channelRemoval=e},expression:"channelRemoval"}})],1)],1),t._v(" "),t.channelRemoval?a("Row",{staticClass:"mt10"},[a("Col",{attrs:{span:"8",offset:"3"}},[a("Input",{attrs:{disabled:"",placeholder:"Enter something..."},model:{value:t.value9,callback:function(e){t.value9=e},expression:"value9"}})],1)],1):t._e(),t._v(" "),a("Row",{staticClass:"mt10"},[a("Col",{attrs:{span:"3"}},[t._v("\n                        是否去重：\n                    ")]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("i-switch",{model:{value:t.channelRemoval,callback:function(e){t.channelRemoval=e},expression:"channelRemoval"}})],1)],1),t._v(" "),a("Row",{staticClass:"mt10"},[a("Col",{attrs:{span:"3"}},[t._v("\n                        是否频控：\n                    ")]),t._v(" "),a("Col",{attrs:{span:"20"}},[a("i-switch",{model:{value:t.channelRemoval,callback:function(e){t.channelRemoval=e},expression:"channelRemoval"}})],1)],1)],1)])],1),t._v(" "),a("Col",{staticStyle:{width:"350px","margin-left":"16px"}},[a("Card",{attrs:{"dis-hover":""}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[t._v("投放人群预估")]),t._v(" "),a("Row",[a("Col",{attrs:{span:"4",offset:"1"}},[a("Icon",{staticStyle:{cursor:"default"},attrs:{type:"ios-people-outline",size:"70",color:"#ccc"}})],1),t._v(" "),a("Col",{attrs:{span:"19"}},[a("ul",{staticClass:"estimate"},[a("li",[a("span",{staticClass:"left-count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.target))])]),a("span",[t._v("目标人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left-count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.exclude))])]),a("span",[t._v("排除人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left-count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.plan))])]),a("span",[t._v("计划人数"+t._s(t.$activity.crowdPrediction.type))])])])])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")({name:"Touch",data:function(){return{crowdData:{event:null,selfTrait:!1,publicTrait:!1,groupTrait:!1,selfCrowd:!0,groupCrowd:!0,disabled:!1,value:{}},removeData:{event:null,selfTrait:!1,publicTrait:!1,groupTrait:!1,selfCrowd:!0,groupCrowd:!0,disabled:!1,value:{}},tagList:[],removeList:{crowdId:"",exportConfig:[]},channelRemoval:!0,value9:"4555",crowdParams:{selfCrowd:!0,value:{},selfTrait:!1,publicTrait:!1,groupTrait:!1},URL:{}}},computed:{crowdValue:function(){return this.crowdData.value},removeValue:function(){return this.removeData.value}},methods:{updateCrowd:function(t){this.crowdData.value=t},updateRemoveCrowd:function(t){t.names.length>10||(this.removeData.value=t,this.setObject(t))},setObject:function(t){this.tagList=t.names,this.removeList.exportConfig=this.$lodash.cloneDeep(t)},closeTag:function(){},changeChannelRemoval:function(){}}},i,!1,function(t){a("mkQ2"),a("XY6w")},"data-v-77e89908",null).exports,n={name:"Touch",data:function(){return{propsData:{event:null,selfTrait:!0,publicTrait:!0,groupTrait:!0,selfCrowd:!1,groupCrowd:!1,disabled:!1,value:{}},channelData:this.$activity.touchGateway}},computed:{traitValue:function(){return this.propsData.value}},methods:{updateTrait:function(t){this.propsData.value=t}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-touch mt20"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{staticStyle:{flex:"1"}},[a("Card",{staticStyle:{"min-height":"192px"},attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("触点选择\n                "),a("Tooltip",{attrs:{"max-width":"300",content:"必须选择一个触点",placement:"right"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("div",{staticClass:"touch_select"},[a("Cascader",{attrs:{placeholder:"请选择触达网关","render-format":function(t){return t.join(" > ")},data:t.channelData,"change-on-select":""}}),t._v(" "),a("TraitInput",t._b({staticClass:"touch_trait mt20",attrs:{placeholder:"请选择触达特性",value:t.traitValue},on:{"on-change":t.updateTrait}},"TraitInput",t.propsData,!1))],1)])],1),t._v(" "),a("Col",{staticStyle:{width:"350px","margin-left":"16px"}},[a("Card",{attrs:{"dis-hover":""}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[t._v("投放人群预估")]),t._v(" "),a("Row",[a("Col",{attrs:{span:"4",offset:"1"}},[a("Icon",{staticStyle:{cursor:"default"},attrs:{type:"ios-people-outline",size:"70",color:"#ccc"}})],1),t._v(" "),a("Col",{attrs:{span:"19"}},[a("ul",{staticClass:"estimate"},[a("li",[a("span",{staticClass:"left_count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.target))])]),a("span",[t._v("目标人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left_count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.exclude))])]),a("span",[t._v("排除人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left_count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.plan))])]),a("span",[t._v("计划人数"+t._s(t.$activity.crowdPrediction.type))])])])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,l,!1,function(t){a("4Y8Y"),a("bYUM")},"data-v-59aac222",null).exports,r=a("7eOT"),c={name:"Mode",components:{Strategy:r.a},data:function(){return{interActiveType:this.$config.interactive_type,modeName:"",modeType:{0:"单次通知",1:"事件响应",2:"周期性通知",3:"日期通知"},noticData:{modeVal:"diytime",dateTime:"2018-08-08 12:24",overTime:"23:59",overVal:!1},eventData:{timeRange:[],eventList:this.$activity.eventList,eventVal:"0",modeVal:"delay",delayTime:2,timeType:"1",countVal:"daily",putInVal:3,dailyVal:4,overVal:!1,countOnOff:!1},cycleData:{timeRange:[],overTime:"09:09",overVal:!1,countOnOff:!1,countVal:1},dateData:{timeRange:[],delayTime:2,dateTypeList:[{value:"0",label:"开户日"},{value:"1",label:"客户生日"}],overVal:!1,overTime:"23:59",dateType:"1",countVal:"putIn",sevenDay:[{value:"0",label:"当天"},{value:"-1",label:"前1天"},{value:"-9",label:"前9天"},{value:"1",label:"后1天"},{value:"9",label:"后9天"}],putInVal:"1",dailyVal:"5",cycleTime:"10:10"},tripResData:{timeRange:["2019-01-01 00:00:00","2019-01-15 23:59:59"],eventList:this.$activity.eventList,eventVal:"1",modeVal:"delay",delayTime:3,timeType:"0",countVal:"daily",putInVal:7,dailyVal:2},tripNoticData:{modeVal:"diytime",dateTime:"2018-08-08 12:24"}}},mounted:function(){this.modeName=this.modeType[this.$config.interactive_type]},methods:{noticeDateSelect:function(){},eventDateSelect:function(t){this.eventData.timeRange=[t[0],t[1].substring(0,10)+"23:59:59"]},tripDateSelect:function(t){this.cycleData.timeRange=[t[0],t[1].substring(0,10)+"23:59:59"]},dateDateSelect:function(t){this.dateData.timeRange=[t[0],t[1].substring(0,10)+"23:59:59"]},syChange:function(){}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-mode"},[a("Card",{staticClass:"mt20",attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("设置触达模式「"+t._s(t.modeName)+"」")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.interActiveType,expression:"interActiveType==0"}]},[a("div",{staticClass:"mb25 f14"},[t._v("目标人群："),a("span",{staticClass:"color-blue"},[t._v("下个月生日人群")]),t._v(" "),a("span",{staticClass:"ml20"},[t._v("更新周期："),a("span",{staticClass:"color-blue"},[t._v("每月1号 00:00:00")])])]),t._v(" "),a("RadioGroup",{model:{value:t.noticData.modeVal,callback:function(e){t.$set(t.noticData,"modeVal",e)},expression:"noticData.modeVal"}},[a("Radio",{attrs:{label:"diytime"}},[t._v("\n                    指定时间\n                ")]),t._v(" "),a("Radio",{attrs:{label:"immediate"}},[t._v("\n                    立即发送\n                    "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"活动时间内，审核通过后立即发送",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("br"),t._v(" "),"diytime"===t.noticData.modeVal?a("div",{staticClass:"nootic-diytime"},[t._v("\n                    指定在\n                    "),a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间"},on:{"on-change":t.noticeDateSelect},model:{value:t.noticData.dateTime,callback:function(e){t.$set(t.noticData,"dateTime",e)},expression:"noticData.dateTime"}}),t._v("\n                    发出\n                    "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"受发送渠道资源影响，发送的具体时间可能会被延后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):t._e(),t._v(" "),a("div",{staticClass:"inline-block mt16 height34"},[t._v("\n                    结束\n                    "),a("i-switch",{model:{value:t.noticData.overVal,callback:function(e){t.$set(t.noticData,"overVal",e)},expression:"noticData.overVal"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]),t._v("  \n                    "),t.noticData.overVal?a("div",{staticClass:"inline-block"},[a("DatePicker",{staticStyle:{width:"80px"},attrs:{format:"HH:mm",type:"datetime",placeholder:"选择时间"},on:{"on-change":t.noticeDateSelect},model:{value:t.noticData.dateTime,callback:function(e){t.$set(t.noticData,"dateTime",e)},expression:"noticData.dateTime"}}),t._v("\n                        前终止发送\n                        "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"受发送渠道资源影响，发送的具体时间可能会被延后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.interActiveType,expression:"interActiveType==1"}]},[a("div",{staticClass:"mb25 f14"},[t._v("目标人群："),a("span",{staticClass:"color-blue"},[t._v("下个月生日人群")]),t._v(" "),a("span",{staticClass:"ml20"},[t._v("预计生成时间："),a("span",{staticClass:"color-blue"},[t._v("2018-12-01 08:50:00")])])]),t._v(" "),a("div",[t._v("\n                在\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{editable:!1,type:"daterange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},on:{"on-change":t.eventDateSelect},model:{value:t.eventData.timeRange,callback:function(e){t.$set(t.eventData,"timeRange",e)},expression:"eventData.timeRange"}}),t._v("\n                期间有效\n            ")],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("\n                由\n                "),a("Select",{staticStyle:{width:"180px"},model:{value:t.eventData.eventVal,callback:function(e){t.$set(t.eventData,"eventVal",e)},expression:"eventData.eventVal"}},t._l(t.eventData.eventList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" 触发发出\n                "),a("div",{staticClass:"inline-block ml20"},[t._v("\n                    延后\n                    "),a("i-switch",{model:{value:t.eventData.overVal,callback:function(e){t.$set(t.eventData,"overVal",e)},expression:"eventData.overVal"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]),t._v("  \n                    "),t.eventData.overVal?a("div",{staticClass:"inline-block"},[a("Input",{staticStyle:{width:"110px"},model:{value:t.eventData.delayTime,callback:function(e){t.$set(t.eventData,"delayTime",e)},expression:"eventData.delayTime"}},[a("Select",{staticStyle:{width:"60px"},attrs:{slot:"append"},slot:"append",model:{value:t.eventData.timeType,callback:function(e){t.$set(t.eventData,"timeType",e)},expression:"eventData.timeType"}},[a("Option",{attrs:{value:"0"}},[t._v("小时")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("天")])],1)],1),t._v("\n                        发送\n                        "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"最大延迟期限30天",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"mt20"},[a("div",{staticClass:"mt20 height34"},[t._v("\n                    限次\n                    "),a("i-switch",{model:{value:t.eventData.countOnOff,callback:function(e){t.$set(t.eventData,"countOnOff",e)},expression:"eventData.countOnOff"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]),t._v("  \n                    "),t.eventData.countOnOff?a("div",{staticClass:"inline-block"},[a("RadioGroup",{model:{value:t.eventData.countVal,callback:function(e){t.$set(t.eventData,"countVal",e)},expression:"eventData.countVal"}},[a("Radio",{staticClass:"ml10",attrs:{label:"putIn"}},[t._v("\n                                有效内\n                                "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.eventData.putInVal,callback:function(e){t.$set(t.eventData,"putInVal",t._n(e))},expression:"eventData.putInVal"}}),t._v("\n                                次\n                            ")],1),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"daily"}},[t._v("\n                                每天\n                                "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.eventData.dailyVal,callback:function(e){t.$set(t.eventData,"dailyVal",t._n(e))},expression:"eventData.dailyVal"}}),t._v("\n                                次\n                            ")],1)],1)],1):t._e()],1)]),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.interActiveType,expression:"interActiveType==2"}]},[a("div",{staticClass:"mb25 f14"},[t._v("目标人群："),a("span",{staticClass:"color-blue"},[t._v("下个月生日人群")]),t._v(" "),a("span",{staticClass:"ml20"},[t._v("预计生成时间："),a("span",{staticClass:"color-blue"},[t._v("2018-12-01 08:50:00")])])]),t._v(" "),a("div",[t._v("\n                在\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{editable:!1,type:"daterange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},on:{"on-change":t.tripDateSelect},model:{value:t.cycleData.timeRange,callback:function(e){t.$set(t.cycleData,"timeRange",e)},expression:"cycleData.timeRange"}}),t._v("\n                期间有效\n            ")],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("\n                人群更新后\n                "),a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间"},on:{"on-change":t.noticeDateSelect},model:{value:t.noticData.dateTime,callback:function(e){t.$set(t.noticData,"dateTime",e)},expression:"noticData.dateTime"}}),t._v("\n                发出\n                "),a("div",{staticClass:"inline-block ml20 height34"},[t._v("\n                    结束\n                    "),a("i-switch",{model:{value:t.cycleData.overVal,callback:function(e){t.$set(t.cycleData,"overVal",e)},expression:"cycleData.overVal"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]),t._v("  \n                    "),t.cycleData.overVal?a("div",{staticClass:"inline-block"},[a("TimePicker",{staticStyle:{width:"80px"},attrs:{format:"HH:mm",placeholder:"选择时间"},model:{value:t.cycleData.overTime,callback:function(e){t.$set(t.cycleData,"overTime",e)},expression:"cycleData.overTime"}}),t._v("\n                        前终止本周期发送\n                        "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"受发送渠道资源影响，发送的具体时间可能会被延后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):t._e()],1)],1),t._v(" "),a("div",{staticClass:"mt20 height34"},[t._v("\n                限次\n                "),a("i-switch",{model:{value:t.cycleData.countOnOff,callback:function(e){t.$set(t.cycleData,"countOnOff",e)},expression:"cycleData.countOnOff"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]),t._v("  \n                "),t.cycleData.countOnOff?a("div",{staticClass:"inline-block"},[t._v("\n                    有效期内\n                    "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.cycleData.countVal,callback:function(e){t.$set(t.cycleData,"countVal",t._n(e))},expression:"cycleData.countVal"}}),t._v("\n                    次\n                ")],1):t._e()],1),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.interActiveType,expression:"interActiveType==3"}]},[a("div",{staticClass:"mb25 f14"},[t._v("目标人群："),a("span",{staticClass:"color-blue"},[t._v("下个月生日人群")]),t._v(" "),a("span",{staticClass:"ml20"},[t._v("更新时间："),a("span",{staticClass:"color-blue"},[t._v("2018-12-01 08:50:00")])])]),t._v(" "),a("div",[t._v("\n                当\n                "),a("Select",{staticStyle:{width:"100px"},attrs:{slot:"append"},slot:"append",model:{value:t.dateData.dateType,callback:function(e){t.$set(t.dateData,"dateType",e)},expression:"dateData.dateType"}},t._l(t.dateData.dateTypeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v("\n                 在\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{editable:!1,type:"daterange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},on:{"on-change":t.dateDateSelect},model:{value:t.dateData.timeRange,callback:function(e){t.$set(t.dateData,"timeRange",e)},expression:"dateData.timeRange"}}),t._v("\n                期间有效\n                "),a("div",{staticClass:"mt20"},[t._v("\n                    在\n                    "),a("Select",{staticStyle:{width:"80px"},model:{value:t.dateData.putInVal,callback:function(e){t.$set(t.dateData,"putInVal",e)},expression:"dateData.putInVal"}},t._l(t.dateData.sevenDay,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" \n                    "),a("TimePicker",{staticStyle:{width:"112px"},attrs:{format:"HH:mm",placeholder:"选择时间"},model:{value:t.dateData.cycleTime,callback:function(e){t.$set(t.dateData,"cycleTime",e)},expression:"dateData.cycleTime"}}),t._v("\n                    发出\n                    "),a("div",{staticClass:"inline-block ml20 height34"},[t._v("\n                        结束\n                        "),a("i-switch",{model:{value:t.dateData.overVal,callback:function(e){t.$set(t.dateData,"overVal",e)},expression:"dateData.overVal"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]),t._v("  \n                        "),t.dateData.overVal?a("div",{staticClass:"inline-block"},[a("TimePicker",{staticStyle:{width:"80px"},attrs:{format:"HH:mm",placeholder:"选择时间"},model:{value:t.dateData.overTime,callback:function(e){t.$set(t.dateData,"overTime",e)},expression:"dateData.overTime"}}),t._v("\n                            前终止本周期发送\n                            "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"受发送渠道资源影响，发送的具体时间可能会被延后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1):t._e()],1)],1)],1),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==t.interActiveType,expression:"interActiveType==4"}]},[a("div",[t._v("\n                在旅程期间\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{disabled:"",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},model:{value:t.tripResData.timeRange,callback:function(e){t.$set(t.tripResData,"timeRange",e)},expression:"tripResData.timeRange"}}),t._v("\n                由\n                "),t._v(" "),a("Select",{staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:t.tripResData.eventVal,callback:function(e){t.$set(t.tripResData,"eventVal",e)},expression:"tripResData.eventVal"}},t._l(t.tripResData.eventList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" 触发发出\n            ")],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("发送时机：\n                "),a("RadioGroup",{model:{value:t.tripResData.modeVal,callback:function(e){t.$set(t.tripResData,"modeVal",e)},expression:"tripResData.modeVal"}},[a("Radio",{attrs:{label:"immediate"}},[t._v("\n                        立即发送\n                    ")]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"delay"}},[t._v("\n                        延迟发送\n                    ")]),t._v("\n                    延迟\n                    "),a("Input",{staticStyle:{width:"110px"},model:{value:t.tripResData.delayTime,callback:function(e){t.$set(t.tripResData,"delayTime",e)},expression:"tripResData.delayTime"}},[a("Select",{staticStyle:{width:"60px"},attrs:{slot:"append"},slot:"append",model:{value:t.tripResData.timeType,callback:function(e){t.$set(t.tripResData,"timeType",e)},expression:"tripResData.timeType"}},[a("Option",{attrs:{value:"0"}},[t._v("小时")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("天")])],1)],1),t._v(" "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"最大延迟期限30天",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("次数限定：\n                "),a("RadioGroup",{model:{value:t.tripResData.countVal,callback:function(e){t.$set(t.tripResData,"countVal",e)},expression:"tripResData.countVal"}},[a("Radio",{attrs:{label:"noLimit"}},[t._v("\n                        不限\n                    ")]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"putIn"}},[t._v("\n                        投放内仅\n                        "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.tripResData.putInVal,callback:function(e){t.$set(t.tripResData,"putInVal",t._n(e))},expression:"tripResData.putInVal"}}),t._v("\n                        次\n                    ")],1),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"daily"}},[t._v("\n                        每天最多\n                        "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.tripResData.dailyVal,callback:function(e){t.$set(t.tripResData,"dailyVal",t._n(e))},expression:"tripResData.dailyVal"}}),t._v("\n                        次\n                    ")],1)],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:5==t.interActiveType,expression:"interActiveType==5"}]},[a("div",[t._v("\n                XX投放单元第N步漏出/转化/裂变人群旅程\n                "),a("p",{staticClass:"mt10"},[t._v("\n                    起止时间：2018-12-01 08:50:00 至 2018-12-06 23:59:59\n                    "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"发送时间必须在该旅程完全结束后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),t._v(" "),a("div",{staticClass:"mt20"},[a("RadioGroup",{model:{value:t.tripNoticData.modeVal,callback:function(e){t.$set(t.tripNoticData,"modeVal",e)},expression:"tripNoticData.modeVal"}},[a("Radio",{attrs:{label:"immediate"}},[t._v("\n                        立即发送"),a("span",{staticStyle:{color:"#999"}},[t._v("（审核通过后，且活动开始时）")]),t._v(" "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"审核通过后，所选旅程完全结束后立即发送",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"diytime"}},[t._v("\n                        指定在\n                        "),a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间"},model:{value:t.tripNoticData.dateTime,callback:function(e){t.$set(t.tripNoticData,"dateTime",e)},expression:"tripNoticData.dateTime"}}),t._v("\n                        发出\n                        "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"受发送渠道资源影响，发送的具体时间可能会被延后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)],1)],1)])])],1)},staticRenderFns:[]};var v=a("VU/8")(c,p,!1,function(t){a("Ol4v"),a("LgD+")},"data-v-e98412a0",null).exports,d=a("woOf"),u=a.n(d),m=a("d32x"),h={name:"Content",components:{TraitInput:m.a},computed:{traitVal:function(){return this.propsData.value}},watch:{value:function(){this.value.length?this.mockValue=this.$activity.content.previewContent:this.mockValue=""}},data:function(){return{mockValue:"",url:"",value:"",userVal:"",userList:this.$activity.content.userList,propsData:{event:null,selfTrait:!0,publicTrait:!0,groupTrait:!0,selfCrowd:!1,groupCrowd:!1,disabled:!1,value:{}}}},methods:{insertUrl:function(){var t=this;this.$Modal.confirm({render:function(e){return e("Input",{props:{autofocus:!0,placeholder:"请输入链接"},on:{input:function(e){t.url=e}}})},width:640,title:"插入链接",onOk:function(){t.value+=t.url,t.url=""}})},insertTrait:function(){var t=this;this.$Modal.confirm({render:function(e){return e(m.a,{props:u()(t.propsData,{value:t.traitVal}),on:{"on-change":function(e){t.propsData.value=e}},style:{width:"100%"}})},width:640,height:600,title:"插入特性",onOk:function(){t.value+="{"+t.traitVal.names[0]+"}",t.propsData.value={}}})},send:function(){var t=this;this.$Modal.confirm({title:"提示",content:"确定发送短信吗",onOk:function(){t.$Message.success({content:"短信已发送",duration:5})}})}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-content"},[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("文本内容")]),t._v(" "),a("Row",[a("Col",{staticClass:"edit-wrapper",attrs:{span:"15"}},[a("div",[a("Input",{attrs:{type:"textarea",autosize:{minRows:7},placeholder:t.$activity.content.defaultTip},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("Row",{staticClass:"btn-wrapper"},[a("Col",{attrs:{span:"12"},nativeOn:{click:function(e){return t.insertTrait(e)}}},[a("span",[t._v("+ 插入特性")])]),t._v(" "),a("Col",{attrs:{span:"12"},nativeOn:{click:function(e){return t.insertUrl(e)}}},[a("span",[t._v("+ 插入链接")])])],1)],1),t._v(" "),a("Row",{staticClass:"send"},[a("Col",{staticClass:"send-item",attrs:{span:"3"}},[a("span",[t._v("发送到手机")])]),t._v(" "),a("Col",{staticClass:"send-item",attrs:{span:"18"}},[a("Select",{attrs:{filterable:"",multiple:""},model:{value:t.userVal,callback:function(e){t.userVal=e},expression:"userVal"}},t._l(t.userList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                                "+t._s(e.label)+"\n                            ")])}))],1),t._v(" "),a("Col",{staticClass:"send-item",attrs:{span:"3"}},[a("Button",{attrs:{type:"primary",disabled:!t.userVal.length||!t.value.trim()},on:{click:t.send}},[t._v("发送")])],1)],1)],1),t._v(" "),a("Col",{staticClass:"view-wrapper",attrs:{span:"9"}},[a("Card",{staticClass:"view-card",attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("预览")]),t._v(" "),a("p",{staticClass:"content"},[t._v(t._s(t.mockValue))])]),t._v(" "),a("p",{staticClass:"tip-wrapper"},[a("span",[t._v("预计 "+t._s(t.mockValue.length)+" 个字， "+t._s(Math.ceil(t.mockValue.length/70))+" 条短信\n                        "),a("Tooltip",{attrs:{"max-width":"240",transfer:"",content:"插入的特性以8个字符（4个字）长度计算，实际字数可能会发生变化"}},[t._v("\n                             "),a("i",{staticClass:"fa fa-question-circle-o f14"})])],1)])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,_,!1,function(t){a("0SNW")},"data-v-4f12a397",null).exports,y=a("mps7"),C={name:"Report",components:{EditInput:y.a,Strategy:r.a},computed:{totalList:function(){return this.staticList.concat(this.dynamicList)},isCanAddStep:function(){return 7!==this.staticList.length+this.dynamicList.length}},data:function(){return{value:1,title:"",touchVal:"",isShowConfig:!0,touchList:this.$activity.eventList,staticList:[{name:"步骤",content:"计划发送"},{name:"步骤",content:"预计发送"},{name:"步骤",content:"发送成功"}],dynamicList:[{name:"步骤",content:"触发事件：点击短链",isSpread:!0,isTitleView:!0,isExact:!1,isFission:!1}],conditions:[]}},methods:{editStepName:function(t,e,a){this.dynamicList[a]=u()(this.dynamicList[a],{content:e,isTitleView:!0})},changeStatus:function(t,e){this.dynamicList[e].isTitleView=t},handleSpread:function(t,e){void 0===e?this[t]=!this[t]:this.dynamicList[e].isSpread=!this.dynamicList[e].isSpread},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除步骤"+t+"吗",onOk:function(){e.dynamicList.splice(t,1)}})},addStep:function(){this.staticList.length+this.dynamicList.length<7&&(this.dynamicList.push({name:"步骤",content:"触发事件：点击短链",isSpread:!0,isTitleView:!0,isExact:!1,isFission:!1}),this.isShowConfig=!0)},syChange:function(){}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-report"},[a("Form",[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("漏斗配置")]),t._v(" "),a("Row",{staticClass:"step-sub-title"},[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"item"},[t._v("漏斗窗口期")]),t._v(" "),a("InputNumber",{staticClass:"item",attrs:{max:90,min:0},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("span",{staticClass:"item"},[t._v("天")]),t._v(" "),a("Tooltip",{attrs:{"max-width":"200",transfer:"",content:"配置进入漏斗到最后一步的最大转化时间"}},[a("i",{staticClass:"fa fa-question-circle-o f14"})])],1),t._v(" "),a("Col",{staticClass:"step-title-list-wrapper",attrs:{span:"19"}},[a("transition",{attrs:{name:"fade"}},[t.isShowConfig?t._e():a("span",{staticClass:"step-title-list"},t._l(t.totalList,function(e,i){return a("span",{key:i,staticClass:"lite-detail"},[a("span",{key:"name"},[t._v("步骤"+t._s(i+1)+"：")]),t._v(" "),a("span",{key:"content"},[t._v(t._s(e.content)+"   ")])])}))]),t._v(" "),a("Icon",{staticClass:"spread-icon",class:{down:t.isShowConfig},attrs:{type:"ios-arrow-forward",size:"18"},on:{click:function(e){t.handleSpread("isShowConfig")}}})],1)],1),t._v(" "),a("Divider",{directives:[{name:"show",rawName:"v-show",value:!t.isShowConfig,expression:"!isShowConfig"}],staticClass:"line"}),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowConfig,expression:"isShowConfig"}]},[t._l(t.staticList,function(e,i){return[a("Card",{key:e.index,staticClass:"simple-step",attrs:{"dis-hover":""}},[a("span",{staticClass:"item"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"step-icon item"},[t._v(t._s(i+1))]),t._v(" "),a("span",{staticClass:"item"},[t._v(t._s(e.content))])])]}),t._v(" "),t._l(t.dynamicList,function(e,i){return a("Card",{key:i,staticClass:"complex-step",attrs:{"dis-hover":""}},[a("div",{staticClass:"complex-content-wrapper"},[a("div",{staticClass:"step-title"},[a("span",{staticClass:"item"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"step-icon item"},[t._v(t._s(t.staticList.length+i+1))]),t._v(" "),a("EditInput",{staticClass:"edit-title item",attrs:{content:e.content,"edit-show":e.isTitleView},on:{"change-status":function(e){return t.changeStatus(e,i)},"confirm-info":function(e,a){return t.editStepName(e,a,i)}}}),t._v(" "),a("span",{staticClass:"icon-wrapper"},[a("Icon",{staticClass:"item",attrs:{type:"ios-trash",size:"18"},on:{click:function(e){t.handleDelete(i)}}}),t._v(" "),a("Icon",{staticClass:"item",class:{down:e.isSpread},attrs:{type:"ios-arrow-forward",size:"18"},on:{click:function(e){t.handleSpread("isShowItem",i)}}})],1)],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[e.isSpread?a("Card",{staticClass:"step-content",attrs:{"dis-hover":""}},[a("Row",{attrs:{slot:"title"},slot:"title"},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"item"},[t._v("触发事件")]),t._v(" "),a("Select",{staticClass:"event-choice item",model:{value:t.touchVal,callback:function(e){t.touchVal=e},expression:"touchVal"}},t._l(t.touchList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Col",{staticClass:"choice-item",attrs:{span:"6"}},[a("span",{staticClass:"item"},[t._v("是否精准")]),t._v(" "),a("i-switch",{staticClass:"item",attrs:{size:"large"},model:{value:e.isExact,callback:function(a){t.$set(e,"isExact",a)},expression:"item.isExact"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("ON")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("OFF")])]),t._v(" "),a("Tooltip",{staticClass:"item",attrs:{"max-width":"200",transfer:"",content:"打开后事件必须携带UID"}},[a("i",{staticClass:"fa fa-question-circle-o f14"})])],1),t._v(" "),a("Col",{staticClass:"choice-item",attrs:{span:"10"}},[a("span",{staticClass:"item"},[t._v("是否包含裂变")]),t._v(" "),a("i-switch",{staticClass:"item",attrs:{size:"large"},model:{value:e.isFission,callback:function(a){t.$set(e,"isFission",a)},expression:"item.isFission"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("ON")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("OFF")])]),t._v(" "),a("Tooltip",{staticClass:"item",attrs:{"max-width":"200",transfer:"",content:"打开后UID必须包含在上一个步骤中"}},[a("i",{staticClass:"fa fa-question-circle-o f14"})])],1)],1),t._v(" "),a("div",[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)],1):t._e()],1)],1)])})],2)]),t._v(" "),a("Button",{staticClass:"add-step",attrs:{type:"primary",disabled:!t.isCanAddStep},on:{click:t.addStep}},[t._v("添加步骤")])],1)],1)],1)},staticRenderFns:[]};var b=a("VU/8")(C,w,!1,function(t){a("DD2A")},"data-v-4b52ed12",null).exports,g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-preview"},[a("p",{staticClass:"date-interval"},[t._v("投放时间：\n        "),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.advertiseTime.from))]),t._v("\n        至\n        "),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.advertiseTime.to))])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("人群")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(0)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v(t._s(t.preview.crowd.traitName)+"："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.originNum)+"人")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("人群类型："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.crowdType))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("最后更新时间："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.updateTime))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("计划投放人数："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.planNum)+"人")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("去除人数："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.minusNum)+"人")])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("触点")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(1)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("渠道："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.channelType))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("触点："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.touchType))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("短信预计发送："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.planSendNum))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("触达率："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.touchRatio)+"%")])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("模式")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(2)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("交互模式："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.mode.interactiveMode))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("发出时间："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.mode.sendTime))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("筛选条件："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.mode.condition))])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("内容")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(3)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("文本："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.content))])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("报告")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(4)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("第一节点："),a("span",{staticClass:"key-content"},[t._v("计划发送")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("第二节点："),a("span",{staticClass:"key-content"},[t._v("预计发送")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("第三节点："),a("span",{staticClass:"key-content"},[t._v("实际发送")])]),t._v(" "),t._l(t.preview.report,function(e){return[a("span",{staticClass:"item"},[t._v("第"+t._s(e.step)+"节点："),a("span",{staticClass:"key-content"},[t._v(t._s(e.title))])])]})],2)])],1)},staticRenderFns:[]};var k=a("VU/8")({name:"Preview",data:function(){return{preview:this.$activity.preview}},methods:{jumpToTab:function(t){this.$tools.bus.$emit("handle-click-step",t)}}},g,!1,function(t){a("3P/q")},"data-v-36f2b678",null).exports,D=a("mvHQ"),x=a.n(D),T=["#FACC14","#1890FF","#2FC25B","#223273","#8453E0","#13C2C2","#3436C7"],S=["rgba(250,204,20, 0.65)","rgba(24,144,255, 0.65)","rgba(47,194,91, 0.65)","rgba(34,50,115, 0.65)","rgba(132,83,224, 0.65)","rgba(19,194,194, 0.65)","rgba(52,54,199, 0.65)"],V={name:"Result",data:function(){var t=this;return{overViewData:[{name:"预计触达",value:"999,999"},{name:"实际触达",value:"856,566"},{name:"触达失败",value:"143,433"}],wordWidth:this.$lodash.clone(this.$activity.stepBarData.xData).sort(function(t,e){return e.length-t.length}),ratioWidth:0,downItemList:this.$activity.downItemList,indeterminate:!0,checkAll:!1,checkAllGroup:[1,2,3],tabList:[{name:"real",label:"实时动态"},{name:"history",label:"历史趋势"}],buttonList:[{value:"日",key:"day"},{value:"周",key:"week"},{value:"月",key:"month"}],buttonActive:"week",subTabList:this.$activity.subTabList,tabActive:"putIn",topList:[{top:140,cTop:210},{top:100,cTop:168},{top:76,cTop:142},{top:60,cTop:125},{top:48,cTop:115}],ratioList:[],barChart:null,barOption:{grid:{top:0,left:"0",right:"5%",bottom:"0",containLabel:!0},xAxis:{position:"top",type:"value",axisLine:{lineStyle:{color:"#e8eaec",width:1}},splitLine:{lineStyle:{color:"#e8eaec"}},axisLabel:{textStyle:{color:"#333"},formatter:function(e){return Math.ceil(e/t.$activity.stepBarData.yData1[0]*100)+"%"}}},yAxis:{type:"category",axisLine:{lineStyle:{color:"#e8eaec",width:1}},axisLabel:{interval:0,textStyle:{color:"#333"},formatter:function(e){return t.formatter(e)}},data:JSON.parse(x()(this.$activity.stepBarData.xData)).reverse()},series:[{type:"bar",stack:"总量",barWidth:"30",color:function(e){return T[t.$activity.stepBarData.yData1.length-1-e.dataIndex]},label:{normal:{show:!0,position:"inside"}},data:JSON.parse(x()(this.$activity.stepBarData.yData1)).reverse()},{type:"bar",stack:"总量",color:function(e){return S[t.$activity.stepBarData.yData1.length-1-e.dataIndex]},label:{normal:{show:!0,position:"inside"}},data:JSON.parse(x()(this.$activity.stepBarData.yData2)).reverse()}]},lineChart:null,lineOption:{tooltip:{trigger:"axis"},legend:{data:this.$activity.stepLineData.yData.map(function(t){return t.name}),top:10,right:10},grid:{left:"30",right:"20",bottom:"25",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#e8eaec",width:1}},splitLine:{lineStyle:{color:"#e8eaec"}},axisLabel:{textStyle:{color:"#333"}},data:this.$activity.stepLineData.xData},yAxis:{type:"value",axisLine:{lineStyle:{color:"#e8eaec",width:1}},axisLabel:{textStyle:{color:"#333"}}},series:this.$activity.stepLineData.yData,dataZoom:[{type:"slider",start:0,end:100,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleStyle:{color:"#3d88f2"},fillerColor:"#edf1f5",borderColor:"#e6e9ed",showDataShadow:!1,showDetail:!1,textStyle:{color:"#3d88f2"},height:16,bottom:0}]}}},methods:{formatter:function(t,e){var a="",i=t.length,s=Math.ceil(i/6);if(s>1){for(var n=0;n<s;n++){var l=6*n,o=l+6;a+=0===n?t.substring(l,o):(e?"<br>":"\n")+t.substring(l,o)}return a}return t},subTabActiveFn:function(t){this.tabActive=t},buttonActiveFn:function(t){this.buttonActive=t},chartResizeFn:function(){var t=this;this.$nextTick(function(){t.barChart.resize(),t.lineChart.resize()})},handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkAllGroup=this.downItemList.map(function(t){return t.value}):this.checkAllGroup=[]},checkAllGroupChange:function(t){3===t.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1)}},created:function(){for(var t=this.$activity.stepBarData.yData1,e=0;e<t.length;e++)e>0&&this.ratioList.push((100*t[e]/t[e-1]).toFixed(2));var a=this.$config.debounce_wait;this.subTabStatus=this.$lodash.debounce(this.subTabActiveFn,a),this.buttonStatus=this.$lodash.debounce(this.buttonActiveFn,a)},mounted:function(){var t=this;this.barChart=this.barChart||this.echarts.init(this.$refs.bar_chart),this.barChart.setOption(this.barOption),this.lineChart=this.lineChart||this.echarts.init(this.$refs.line_chart),this.lineChart.setOption(this.lineOption),this.$nextTick(function(){t.ratioWidth=t.$refs.wordwidth.scrollWidth,window.addEventListener("resize",t.chartResizeFn)})},watch:{$route:function(t,e){}},destroyed:function(){window.removeEventListener("resize",this.chartResizeFn)}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-result"},[a("div",{staticClass:"overview-box"},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[t._l(t.overViewData,function(e,i){return a("Col",{key:i,staticClass:"text-align-c",class:"line",attrs:{span:"4"}},[a("p",{staticClass:"f20 color-blue"},[t._v(t._s(e.value))]),t._v(" "),a("p",{staticClass:"f14 pt10"},[t._v(t._s(e.name))])])}),t._v(" "),a("Col",{attrs:{span:"1"}},[a("i",{staticClass:"fa f18 fa-caret-right",staticStyle:{color:"#e8eaec"}})]),t._v(" "),a("Col",{attrs:{span:"11"}},[a("Row",{staticClass:"f14 ov-ratio"},[a("Col",{attrs:{span:"1"}}),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("排除人数：")]),t._v(" "),a("Col",{staticClass:"color-blue",attrs:{span:"3"}},[a("strong",[t._v("4637")])]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"orign-rat"},[a("div",{staticClass:"real-rat"})])]),t._v(" "),a("Col",{attrs:{span:"2"}},[t._v("50%")])],1),t._v(" "),a("Row",{staticClass:"f14 ov-ratio"},[a("Col",{attrs:{span:"1"}}),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("频控人数：")]),t._v(" "),a("Col",{staticClass:"color-blue",attrs:{span:"3"}},[a("strong",[t._v("4637")])]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"orign-rat"},[a("div",{staticClass:"real-rat"})])]),t._v(" "),a("Col",{attrs:{span:"2"}},[t._v("50%")])],1),t._v(" "),a("Row",{staticClass:"f14 ov-ratio"},[a("Col",{attrs:{span:"1"}}),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("不符合实时条件：")]),t._v(" "),a("Col",{staticClass:"color-blue",attrs:{span:"3"}},[a("strong",[t._v("4637")])]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"orign-rat"},[a("div",{staticClass:"real-rat"})])]),t._v(" "),a("Col",{attrs:{span:"2"}},[t._v("50%")])],1),t._v(" "),a("Row",{staticClass:"f14 ov-ratio"},[a("Col",{attrs:{span:"1"}}),t._v(" "),a("Col",{attrs:{span:"6"}},[t._v("发送失败：")]),t._v(" "),a("Col",{staticClass:"color-blue",attrs:{span:"3"}},[a("strong",[t._v("856,566")])]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"orign-rat"},[a("div",{staticClass:"real-rat"})])]),t._v(" "),a("Col",{attrs:{span:"2"}},[t._v("50%")])],1)],1)],2)],1),t._v(" "),a("div",{ref:"wordwidth",staticClass:"word-width"},t._l(t.wordWidth,function(e,i){return a("div",{key:i,domProps:{innerHTML:t._s(t.formatter(e,"br"))}})})),t._v(" "),a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"step_warpper",style:{left:t.ratioWidth+15+"px"}},t._l(t.ratioList,function(e,i){return a("div",{key:i,staticClass:"step_ratio",style:{opacity:1-i/10,top:i*t.topList[t.ratioList.length-2].top+t.topList[t.ratioList.length-2].cTop+"px"}},[t._v(t._s(e)+"%")])})),t._v(" "),a("p",{staticClass:"last-ratio"},[a("strong",[t._v("最终转化率 70%")]),t._v(" "),a("Tooltip",{attrs:{"max-width":"320",content:"最终转化率等于漏斗最后一步的“步骤转化人群”除以“触达成功人群”乘以100%",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("div",{ref:"bar_chart",staticClass:"chart"})]),t._v(" "),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"sub_tab_list"},[a("Tabs",t._l(t.tabList,function(t,e){return a("TabPane",{key:e,attrs:{label:t.label}})}))],1),t._v(" "),a("div",{staticClass:"chart-title"},[a("span",[t._v("过去24小时每小时转化数量")]),t._v(" "),t._e()]),t._v(" "),t._e(),t._v(" "),a("div",{ref:"line_chart",staticClass:"chart line_chart"})])],1)],1)},staticRenderFns:[]};var R={name:"Detail",components:{Crowd:s,Touch:o,Mode:v,Content:f,Report:b,Preview:k,Result:a("VU/8")(V,$,!1,function(t){a("QoKC"),a("jwm+")},"data-v-b60db5ec",null).exports,Creat:a("tvCr").a,EditInput:y.a},data:function(){return{stepFixed:!1,fixedWidth:0,disEditBtn:!1,title:"修改基本信息",stepStatus:null,currentClick:null,returnList:"",current:0,nextBtnType:!1,breadcrumb:this.$activity.breadcrumb,responseType:[{label:"单次通知",value:"0"},{label:"事件响应",value:"1"},{label:"周期性通知",value:"2"},{label:"日期通知",value:"3"}],tabList:[{name:"人群",keyName:"Crowd"},{name:"触点",keyName:"Touch"},{name:"模式",keyName:"Mode"},{name:"内容",keyName:"Content"},{name:"报告",keyName:"Report"},{name:"预览",keyName:"Preview"}],tabView:"Crowd",creatUnit:!1,editContent:this.$activity.editContent,defineEditShow:!0,nameEditShow:!0,formItem:{name:"年货节-超级秒杀日，最低1折起",description:"888"},putType:[{label:"拉新",value:"拉新"},{label:"促活",value:"促活"}]}},computed:{buttonText:function(){return 5!==this.current?"下一步":"Preview"===this.tabView?"提交":"Result"===this.tabView?(this.disEditBtn=!0,this.nextBtnType=!0,"投放中"):null!==this.currentClick?"提交":void(this.nextBtnType=!1)}},watch:{},mounted:function(){var t=this;this.initData(),this.$tools.bus.$on("handle-click-step",function(e,a){a?(t.currentClick=null,t.current=e,t.tabView=t.tabList[e].keyName):t.handleClickStep(e)})},beforeDestroy:function(){this.$tools.bus.$off("handle-click-step"),window.removeEventListener("resize",this.fixedStep),document.querySelector(".main-right").removeEventListener("scroll",function(){})},methods:{initData:function(){var t=this;this.returnList={path:"/activity/list",query:{}},this.$nextTick(function(){t.fixedStep(),window.addEventListener("resize",t.fixedStep)})},fixedStep:function(){var t=this,e=document.querySelector(".scroll-wrap"),a=document.querySelector(".detail-box").offsetTop,i=document.querySelector(".step-wrapper");this.fixedWidth=document.querySelector(".relative-top").clientWidth,e.addEventListener("scroll",function(){i.style.width=t.fixedWidth+"px",e.scrollTop>a+160-74?(t.stepFixed=!0,i.style.left=247-e.scrollLeft+"px"):(t.stepFixed=!1,i.style.left="auto")})},next:function(){var t=this;if(this.currentClick=null,this.tabView=null,this.stepStatus=null,"Result"!=this.tabView){if(!(this.current<5))return this.tabView="Result",void(this.stepStatus="finish");this.current+=1,this.stepStatus="process";var e=this.tabList.find(function(e,a){return t.current===a});this.tabView=e.keyName}},handleClickStep:function(t,e){"Result"!=this.tabView&&this.current>=t&&(this.stepStatus=null,e&&e.keyName?this.tabView=e.keyName:this.tabView=this.tabList[t].keyName,this.currentClick=t,this.stepStatus="finish")},editUtil:function(){this.creatUnit=!0},cancel:function(){this.creatUnit=!1},ok:function(){this.creatUnit=!1},cancelEdit:function(){this.nameEditShow=!0,this.defineEditShow=!0,this.$tools.bus.$emit("recovery-edit")},confirmInfo:function(t,e){if("name"===t){if(""===e)return this.$Message.destroy(),this.$Message.error("请输入名称"),void(this.nameEditShow=!1);if(!this.$config.reg_input.reg.test(e))return this.$Message.destroy(),void this.$Message.error("只支持中英文、数字、下划线，请正确填写");this.nameEditShow=!0,this.formItem[t]=e}"description"==t&&this.formItem.description===e||(this.defineEditShow=!0,this.formItem[t]=e)},changeStatus:function(t,e){this[e]=t}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertising-detail w100 h100"},[a("Row",{staticClass:"details-title",attrs:{type:"flex",justify:"space-between"}},[a("Col",[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:t.returnList}},[t._v("返回列表")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:t.returnList}},[t._v(t._s(t.breadcrumb[0]))]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.breadcrumb[1]))])],1)],1)],1),t._v(" "),a("div",{staticClass:"scroll-wrap"},[a("Card",{staticClass:"detail-box m10",attrs:{"dis-hover":""}},[a("Form",{ref:"formArea",attrs:{"label-position":"left",model:t.formItem}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Row",{staticStyle:{"line-height":"29px"}},[a("Col",{attrs:{span:"3"}},[t._v(" 投放单元名称：\n                        ")]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("edit-input",{staticStyle:{"margin-bottom":"0"},attrs:{"max-length":20,label:"","default-placeholder":"请输入名称，20字以内","label-name":"name",tipContent:t.formItem.name,content:t.formItem.name,"edit-show":t.nameEditShow},on:{"cancel-edit":t.cancelEdit,"confirm-info":t.confirmInfo,"change-status":function(e){return t.changeStatus(e,"nameEditShow")}}})],1),t._v(" "),a("Col",{attrs:{span:"2"}},[a("span",[t._v("所属活动：")])]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Tooltip",{attrs:{content:t.editContent.activity}},[a("p",{staticClass:"ml10 ellipsis color-blue"},[t._v(t._s(t.editContent.activity))])])],1)],1),t._v(" "),a("Row",{staticClass:"detail-height"},[a("Col",{attrs:{span:"3"}},[a("span",[t._v("投放单元ID：")])]),t._v(" "),a("Col",{attrs:{span:"10"}},[a("span",{staticClass:"ml10 color-blue"},[t._v("DU19011469")])]),t._v(" "),a("Col",{attrs:{span:"2"}},[a("span",[t._v("交互类型：")])]),t._v(" "),a("Col",{attrs:{span:"6"}},[a("span",{staticClass:"ml10 color-blue"},[t._v(t._s(t.responseType[t.$config.interactive_type].label)+" 营销类")])])],1),t._v(" "),a("Row",{staticClass:"detail-height"},[a("Col",{attrs:{span:"3"}},[a("span",[t._v("投放类别：")])]),t._v(" "),a("Col",{attrs:{span:"5"}},[a("Select",{staticClass:"width600",attrs:{filterable:"",multiple:"",placeholder:"请选择投放类别"}},t._l(t.putType,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Row",[a("Col",{attrs:{span:"3"}},[a("p",{staticStyle:{"margin-top":"8px"}},[t._v("描述：")])]),t._v(" "),a("Col",{attrs:{span:"21"}},[a("edit-input",{staticStyle:{"margin-bottom":"0"},attrs:{"max-length":100,textarea:"textarea",label:"","default-placeholder":"请输入描述，100字以内","label-name":"description",inputWidth:400,"size-obj":{maxRows:5,minRows:3},tipContent:t.formItem.description,content:t.formItem.description,"edit-show":t.defineEditShow},on:{"cancel-edit":t.cancelEdit,"confirm-info":t.confirmInfo,"change-status":function(e){return t.changeStatus(e,"defineEditShow")}}})],1)],1)],1)],1)],1)],1),t._v(" "),a("Card",{staticClass:"m10 min-height",attrs:{"dis-hover":""}},[a("div",{staticClass:"get-scroll-top"},[a("Row",{staticClass:"step-wrapper",class:{"fixed-step-wrapper":t.stepFixed}},[a("Col",{attrs:{span:"20"}},[a("Steps",{attrs:{current:t.current,status:t.stepStatus}},t._l(t.tabList,function(e,i){return a("Step",{key:i,ref:"step"+i,refInFor:!0,class:{"current-step":t.current===t.tabList.length-1,"current-color":t.currentClick===i},attrs:{title:e.name},nativeOn:{click:function(a){t.handleClickStep(i,e)}}})}))],1),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"4"}},[a("ButtonGroup",[a("Button",{staticStyle:{"border-right-color":"#5cadff"},style:{cursor:t.nextBtnType?"default":"pointer"},attrs:{type:"primary"},on:{click:t.next}},[t._v(t._s(t.buttonText))]),t._v(" "),t.nextBtnType?a("Button",{staticStyle:{padding:"0","border-left-color":"#5cadff"},attrs:{type:"primary"}},[a("Dropdown",{attrs:{trigger:"click",placement:"bottom-end"}},[a("div",{staticStyle:{padding:"6px 12px"}},[a("Icon",{attrs:{type:"md-more"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[t._v("\n                                                暂停\n                                            ")]),t._v(" "),a("DropdownItem",[t._v("\n                                                结束\n                                            ")])],1)],1)],1):t._e()],1)],1)],1)],1),t._v(" "),a("Divider"),t._v(" "),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("div",{staticClass:"relative-top"},[a(t.tabView,{tag:"component"})],1)])],1)],1)],1)},staticRenderFns:[]};var L=a("VU/8")(R,I,!1,function(t){a("rG9k"),a("Ok9J")},"data-v-751a8346",null);e.default=L.exports},XY6w:function(t,e){},bYUM:function(t,e){},iGeD:function(t,e){},"jwm+":function(t,e){},mkQ2:function(t,e){},rG9k:function(t,e){},tvCr:function(t,e,a){"use strict";var i=a("mvHQ"),s=a.n(i),n=a("CFN8"),l={props:{editContent:{type:Object,default:function(){return{}}},title:{type:String,default:function(){return""}}},data:function(){return{formValidate:{activity:this.editContent.activity||"",name:this.editContent.name||"",interactiveType:this.editContent.interactiveType?""+this.editContent.interactiveType:"",putType:this.editContent.putType||[],description:this.editContent.description||"",touch:this.editContent.touch||"",touchTraitVal:""},ruleValidate:{activity:[{required:!0,message:"请选择所属活动",trigger:"change"}],name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{pattern:this.$config.reg_input.reg,message:this.$config.reg_input.msg,trigger:"blur"}],touch:[{required:!0,message:"请选择触点",trigger:"change"}],interactiveType:[{required:!0,message:"请选择交互类型",trigger:"change"}]},activityList:[{label:"年货节-超级秒杀日，最低1折起",value:"年货节-超级秒杀日，最低1折起"},{label:"新装抢鲜，呼气春天，春装全面上市",value:"新装抢鲜，呼气春天，春装全面上市"},{label:"四月踏青，魅力出行，缤纷春季购物节",value:"四月踏青，魅力出行，缤纷春季购物节"},{label:"五一钜惠，全场满立减，满包邮，满500送20",value:"五一钜惠，全场满立减，满包邮，满500送20"},{label:"十周年庆，年中放价，全场满618减60",value:"十周年庆，年中放价，全场满618减60"},{label:"夏季初登场，购物送好礼",value:"夏季初登场，购物送好礼"},{label:"仲夏大行动，全场9折起，满150再返20",value:"仲夏大行动，全场9折起，满150再返20"},{label:"开学季-领跑新学期，开学装备特惠专场",value:"开学季-领跑新学期，开学装备特惠专场"},{label:"尽享意外惊喜“国庆购物不花钱”",value:"尽享意外惊喜“国庆购物不花钱”"},{label:"庆圣诞迎元旦 精选商品7折起 满400包邮",value:"庆圣诞迎元旦 精选商品7折起 满400包邮"}],responseType:[{label:"单次通知",value:"0"},{label:"事件响应",value:"1"},{label:"周期性通知",value:"2"},{label:"日期通知",value:"3"}],putTypes:[{label:"拉新",value:"拉新"},{label:"促活",value:"促活"}],touchPointData:[{value:"1",label:"APP PUSH"},{value:"2",label:"小程序"},{value:"3",label:"公众号"},{value:"4",label:"短信"},{value:"5",label:"邮件"}]}},computed:{},components:{editTitle:n.a},mounted:function(){},methods:{changeTouch:function(){this.formValidate.touchTraitVal=""},changeInteractiveType:function(t){var e=this;"/activity/list"==this.$route.path||this.$Modal.confirm({title:"确定要切换交互类型？",content:"<p>切换交互类型后，将重置投放单元</p>",onOk:function(){e.formValidate.interactiveType=""+t,e.$Message.destroy(),e.$Message.success("已更改")},onCancel:function(){e.formValidate.interactiveType=e.editContent.interactiveType,e.$Message.destroy(),e.$Message.success("取消更改")}})},cancel:function(){this.editContent=={}?this.formValidate={}:this.formValidate=this.editContent,this.$emit("cancelCreateUnit",!1)},ok:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&(t.$config.interactive_type=t.formValidate.interactiveType,t.$emit("submitCreateUnit",!1),"{}"==s()(t.editContent)?t.$router.push({path:"/activity/detail",query:{name:"detail"}}):t.$tools.bus.$emit("handle-click-step",0,!0))})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mask-bg"},[a("edit-title",{attrs:{title:t.title},on:{"cancel-click":t.cancel,"ok-click":t.ok}}),t._v(" "),a("div",{staticClass:"custom-dialog-content "},[a("div",{staticClass:"m20"},[a("Card",{staticStyle:{"padding-bottom":"100px"},attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("基本信息")]),t._v(" "),a("Form",{ref:"formValidate",staticClass:"mt20",staticStyle:{padding:"0 20px"},attrs:{"label-position":"left","label-width":95,model:t.formValidate,rules:t.ruleValidate}},[a("Form-item",{attrs:{label:"所属活动：",prop:"activity"}},[a("Select",{staticClass:"width500",attrs:{placeholder:"请选择所属活动"},model:{value:t.formValidate.activity,callback:function(e){t.$set(t.formValidate,"activity",e)},expression:"formValidate.activity"}},t._l(t.activityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"投放名称：",prop:"name"}},[a("Input",{staticClass:"width500",attrs:{maxlength:20,placeholder:"请输入投放单元名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name","string"==typeof e?e.trim():e)},expression:"formValidate.name"}})],1),t._v(" "),a("Form-item",{attrs:{label:"触点选择：",prop:"touch"}},[a("Select",{staticClass:"width500",attrs:{placeholder:"请选择触点"},on:{"on-change":t.changeTouch},model:{value:t.formValidate.touch,callback:function(e){t.$set(t.formValidate,"touch",e)},expression:"formValidate.touch"}},t._l(t.touchPointData,function(e,i){return a("Option",{key:i,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"触点特性：",prop:"touchTrait"}},[a("Select",{staticClass:"width500",attrs:{placeholder:"请选择触点特性"},model:{value:t.formValidate.touchTraitVal,callback:function(e){t.$set(t.formValidate,"touchTraitVal",e)},expression:"formValidate.touchTraitVal"}},[1==t.formValidate.touch?a("Option",{attrs:{value:"mac"}},[t._v("MAC")]):t._e(),t._v(" "),1==t.formValidate.touch?a("Option",{attrs:{value:"imei"}},[t._v("IMEI")]):t._e(),t._v(" "),2==t.formValidate.touch?a("Option",{attrs:{value:"openid"}},[t._v("OpenID")]):t._e(),t._v(" "),3==t.formValidate.touch?a("Option",{attrs:{value:"openid"}},[t._v("OpenID")]):t._e(),t._v(" "),4==t.formValidate.touch?a("Option",{attrs:{value:"phonenumber"}},[t._v("手机号")]):t._e(),t._v(" "),5==t.formValidate.touch?a("Option",{attrs:{value:"email"}},[t._v("邮箱地址")]):t._e()],1)],1),t._v(" "),a("Form-item",{attrs:{label:"交互类型：",prop:"interactiveType"}},[a("Select",{staticClass:"width500",attrs:{placeholder:"请选择交互类型"},on:{"on-change":t.changeInteractiveType},model:{value:t.formValidate.interactiveType,callback:function(e){t.$set(t.formValidate,"interactiveType",e)},expression:"formValidate.interactiveType"}},t._l(t.responseType,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"投放类别：",prop:"putType"}},[a("Select",{staticClass:"width500",attrs:{filterable:"",multiple:"",placeholder:"请选择投放类别"},model:{value:t.formValidate.putType,callback:function(e){t.$set(t.formValidate,"putType",e)},expression:"formValidate.putType"}},t._l(t.putTypes,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"描述：",prop:"description"}},[a("Input",{staticClass:"width500",attrs:{maxlength:100,type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请输入活动描述，最多100个字"},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description","string"==typeof e?e.trim():e)},expression:"formValidate.description"}})],1)],1)],1)],1)])],1)},staticRenderFns:[]},r=a("VU/8")(l,o,!1,null,null,null);e.a=r.exports}});