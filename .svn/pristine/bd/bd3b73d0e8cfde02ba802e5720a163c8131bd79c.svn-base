webpackJsonp([14],{AJcs:function(t,e,s){var i;!function(n){"use strict";function a(t,e){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}function o(t,e,s,i,n,o){return a((r=a(a(e,t),a(i,o)))<<(l=n)|r>>>32-l,s);var r,l}function r(t,e,s,i,n,a,r){return o(e&s|~e&i,t,e,n,a,r)}function l(t,e,s,i,n,a,r){return o(e&i|s&~i,t,e,n,a,r)}function c(t,e,s,i,n,a,r){return o(e^s^i,t,e,n,a,r)}function h(t,e,s,i,n,a,r){return o(s^(e|~i),t,e,n,a,r)}function u(t,e){var s,i,n,o,u;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var d=1732584193,f=-271733879,_=-1732584194,m=271733878;for(s=0;s<t.length;s+=16)i=d,n=f,o=_,u=m,f=h(f=h(f=h(f=h(f=c(f=c(f=c(f=c(f=l(f=l(f=l(f=l(f=r(f=r(f=r(f=r(f,_=r(_,m=r(m,d=r(d,f,_,m,t[s],7,-680876936),f,_,t[s+1],12,-389564586),d,f,t[s+2],17,606105819),m,d,t[s+3],22,-1044525330),_=r(_,m=r(m,d=r(d,f,_,m,t[s+4],7,-176418897),f,_,t[s+5],12,1200080426),d,f,t[s+6],17,-1473231341),m,d,t[s+7],22,-45705983),_=r(_,m=r(m,d=r(d,f,_,m,t[s+8],7,1770035416),f,_,t[s+9],12,-1958414417),d,f,t[s+10],17,-42063),m,d,t[s+11],22,-1990404162),_=r(_,m=r(m,d=r(d,f,_,m,t[s+12],7,1804603682),f,_,t[s+13],12,-40341101),d,f,t[s+14],17,-1502002290),m,d,t[s+15],22,1236535329),_=l(_,m=l(m,d=l(d,f,_,m,t[s+1],5,-165796510),f,_,t[s+6],9,-1069501632),d,f,t[s+11],14,643717713),m,d,t[s],20,-373897302),_=l(_,m=l(m,d=l(d,f,_,m,t[s+5],5,-701558691),f,_,t[s+10],9,38016083),d,f,t[s+15],14,-660478335),m,d,t[s+4],20,-405537848),_=l(_,m=l(m,d=l(d,f,_,m,t[s+9],5,568446438),f,_,t[s+14],9,-1019803690),d,f,t[s+3],14,-187363961),m,d,t[s+8],20,1163531501),_=l(_,m=l(m,d=l(d,f,_,m,t[s+13],5,-1444681467),f,_,t[s+2],9,-51403784),d,f,t[s+7],14,1735328473),m,d,t[s+12],20,-1926607734),_=c(_,m=c(m,d=c(d,f,_,m,t[s+5],4,-378558),f,_,t[s+8],11,-2022574463),d,f,t[s+11],16,1839030562),m,d,t[s+14],23,-35309556),_=c(_,m=c(m,d=c(d,f,_,m,t[s+1],4,-1530992060),f,_,t[s+4],11,1272893353),d,f,t[s+7],16,-155497632),m,d,t[s+10],23,-1094730640),_=c(_,m=c(m,d=c(d,f,_,m,t[s+13],4,681279174),f,_,t[s],11,-358537222),d,f,t[s+3],16,-722521979),m,d,t[s+6],23,76029189),_=c(_,m=c(m,d=c(d,f,_,m,t[s+9],4,-640364487),f,_,t[s+12],11,-421815835),d,f,t[s+15],16,530742520),m,d,t[s+2],23,-995338651),_=h(_,m=h(m,d=h(d,f,_,m,t[s],6,-198630844),f,_,t[s+7],10,1126891415),d,f,t[s+14],15,-1416354905),m,d,t[s+5],21,-57434055),_=h(_,m=h(m,d=h(d,f,_,m,t[s+12],6,1700485571),f,_,t[s+3],10,-1894986606),d,f,t[s+10],15,-1051523),m,d,t[s+1],21,-2054922799),_=h(_,m=h(m,d=h(d,f,_,m,t[s+8],6,1873313359),f,_,t[s+15],10,-30611744),d,f,t[s+6],15,-1560198380),m,d,t[s+13],21,1309151649),_=h(_,m=h(m,d=h(d,f,_,m,t[s+4],6,-145523070),f,_,t[s+11],10,-1120210379),d,f,t[s+2],15,718787259),m,d,t[s+9],21,-343485551),d=a(d,i),f=a(f,n),_=a(_,o),m=a(m,u);return[d,f,_,m]}function d(t){var e,s="",i=32*t.length;for(e=0;e<i;e+=8)s+=String.fromCharCode(t[e>>5]>>>e%32&255);return s}function f(t){var e,s=[];for(s[(t.length>>2)-1]=void 0,e=0;e<s.length;e+=1)s[e]=0;var i=8*t.length;for(e=0;e<i;e+=8)s[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return s}function _(t){var e,s,i="";for(s=0;s<t.length;s+=1)e=t.charCodeAt(s),i+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return i}function m(t){return unescape(encodeURIComponent(t))}function p(t){return function(t){return d(u(f(t),8*t.length))}(m(t))}function g(t,e){return function(t,e){var s,i,n=f(t),a=[],o=[];for(a[15]=o[15]=void 0,n.length>16&&(n=u(n,8*t.length)),s=0;s<16;s+=1)a[s]=909522486^n[s],o[s]=1549556828^n[s];return i=u(a.concat(f(e)),512+8*e.length),d(u(o.concat(i),640))}(m(t),m(e))}function v(t,e,s){return e?s?g(e,t):_(g(e,t)):s?p(t):_(p(t))}void 0===(i=function(){return v}.call(e,s,e,t))||(t.exports=i)}()},B0Pk:function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__("nErl"),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(t){return function(e){return new Sha1(!0).update(e)[t]()}},createMethod=function(){var t=createOutputMethod("hex");NODE_JS&&(t=nodeWrap(t)),t.create=function(){return new Sha1},t.update=function(e){return t.create().update(e)};for(var e=0;e<OUTPUT_TYPES.length;++e){var s=OUTPUT_TYPES[e];t[s]=createOutputMethod(s)}return t},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(t){if("string"==typeof t)return crypto.createHash("sha1").update(t,"utf8").digest("hex");if(t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(void 0===t.length)return method(t);return crypto.createHash("sha1").update(new Buffer(t)).digest("hex")};return nodeMethod};function Sha1(t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(t){if(!this.finalized){var e="string"!=typeof t;e&&t.constructor===root.ArrayBuffer&&(t=new Uint8Array(t));for(var s,i,n=0,a=t.length||0,o=this.blocks;n<a;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e)for(i=this.start;n<a&&i<64;++n)o[i>>2]|=t[n]<<SHIFT[3&i++];else for(i=this.start;n<a&&i<64;++n)(s=t.charCodeAt(n))<128?o[i>>2]|=s<<SHIFT[3&i++]:s<2048?(o[i>>2]|=(192|s>>6)<<SHIFT[3&i++],o[i>>2]|=(128|63&s)<<SHIFT[3&i++]):s<55296||s>=57344?(o[i>>2]|=(224|s>>12)<<SHIFT[3&i++],o[i>>2]|=(128|s>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&s)<<SHIFT[3&i++]):(s=65536+((1023&s)<<10|1023&t.charCodeAt(++n)),o[i>>2]|=(240|s>>18)<<SHIFT[3&i++],o[i>>2]|=(128|s>>12&63)<<SHIFT[3&i++],o[i>>2]|=(128|s>>6&63)<<SHIFT[3&i++],o[i>>2]|=(128|63&s)<<SHIFT[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=o[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var t,e,s=this.h0,i=this.h1,n=this.h2,a=this.h3,o=this.h4,r=this.blocks;for(t=16;t<80;++t)e=r[t-3]^r[t-8]^r[t-14]^r[t-16],r[t]=e<<1|e>>>31;for(t=0;t<20;t+=5)s=(e=(i=(e=(n=(e=(a=(e=(o=(e=s<<5|s>>>27)+(i&n|~i&a)+o+1518500249+r[t]<<0)<<5|o>>>27)+(s&(i=i<<30|i>>>2)|~s&n)+a+1518500249+r[t+1]<<0)<<5|a>>>27)+(o&(s=s<<30|s>>>2)|~o&i)+n+1518500249+r[t+2]<<0)<<5|n>>>27)+(a&(o=o<<30|o>>>2)|~a&s)+i+1518500249+r[t+3]<<0)<<5|i>>>27)+(n&(a=a<<30|a>>>2)|~n&o)+s+1518500249+r[t+4]<<0,n=n<<30|n>>>2;for(;t<40;t+=5)s=(e=(i=(e=(n=(e=(a=(e=(o=(e=s<<5|s>>>27)+(i^n^a)+o+1859775393+r[t]<<0)<<5|o>>>27)+(s^(i=i<<30|i>>>2)^n)+a+1859775393+r[t+1]<<0)<<5|a>>>27)+(o^(s=s<<30|s>>>2)^i)+n+1859775393+r[t+2]<<0)<<5|n>>>27)+(a^(o=o<<30|o>>>2)^s)+i+1859775393+r[t+3]<<0)<<5|i>>>27)+(n^(a=a<<30|a>>>2)^o)+s+1859775393+r[t+4]<<0,n=n<<30|n>>>2;for(;t<60;t+=5)s=(e=(i=(e=(n=(e=(a=(e=(o=(e=s<<5|s>>>27)+(i&n|i&a|n&a)+o-1894007588+r[t]<<0)<<5|o>>>27)+(s&(i=i<<30|i>>>2)|s&n|i&n)+a-1894007588+r[t+1]<<0)<<5|a>>>27)+(o&(s=s<<30|s>>>2)|o&i|s&i)+n-1894007588+r[t+2]<<0)<<5|n>>>27)+(a&(o=o<<30|o>>>2)|a&s|o&s)+i-1894007588+r[t+3]<<0)<<5|i>>>27)+(n&(a=a<<30|a>>>2)|n&o|a&o)+s-1894007588+r[t+4]<<0,n=n<<30|n>>>2;for(;t<80;t+=5)s=(e=(i=(e=(n=(e=(a=(e=(o=(e=s<<5|s>>>27)+(i^n^a)+o-899497514+r[t]<<0)<<5|o>>>27)+(s^(i=i<<30|i>>>2)^n)+a-899497514+r[t+1]<<0)<<5|a>>>27)+(o^(s=s<<30|s>>>2)^i)+n-899497514+r[t+2]<<0)<<5|n>>>27)+(a^(o=o<<30|o>>>2)^s)+i-899497514+r[t+3]<<0)<<5|i>>>27)+(n^(a=a<<30|a>>>2)^o)+s-899497514+r[t+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+s<<0,this.h1=this.h1+i<<0,this.h2=this.h2+n<<0,this.h3=this.h3+a<<0,this.h4=this.h4+o<<0},Sha1.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,i=this.h3,n=this.h4;return HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,i=this.h3,n=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,s>>24&255,s>>16&255,s>>8&255,255&s,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(exports,__webpack_require__("W2nU"),__webpack_require__("DuR2"))},KgAv:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"ItemMenu",data:function(){return{nameIsEmpty:!1}},props:{hasIcon:Boolean,data:{type:Object,default:function(){return{}}}},mounted:function(){if(this.data.children&&this.data.children.length&&"outer"===this.data.type){var t=this.data.children.every(function(t){return""===t.name});this.nameIsEmpty=t}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.nameIsEmpty?t._e():s("Submenu",{attrs:{name:""+t.data.idx}},[t.data.name?s("template",{slot:"title"},[t.hasIcon?s("Icon",{attrs:{type:t.data.icon||"md-list-box"}}):t._e(),s("span",[t._v(t._s(t.data.name))])],1):t._e(),t._v(" "),t._l(t.data.children,function(e,i){return[e.children?s("ItemMenu",{key:i,attrs:{data:e}}):s("router-link",{key:i,attrs:{to:e.path}},[e.name?s("MenuItem",{directives:[{name:"el-title",rawName:"v-el-title",value:e.name,expression:"item.name"}],attrs:{name:e.idx}},[t._v(t._s(e.name))]):t._e()],1)]})],2)},staticRenderFns:[]};var a=s("VU/8")(i,n,!1,function(t){s("jnv/")},"data-v-0be45bdb",null).exports,o=s("CFN8"),r=s("AJcs"),l=s.n(r),c=s("B0Pk"),h=s.n(c),u={name:"",data:function(){return{title:"修改密码",saveBtnStatus:!1,userName:"",formValidate:{old:"",new:"",confirmNew:""},ruleValidate:{old:[{required:!0,message:"请输入原始密码",trigger:"blur"}],new:[{required:!0,message:"请输入新密码",trigger:"blur"},{validator:this.validateNewPassCheck,trigger:"blur"}],confirmNew:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:this.validatePassCheck,trigger:"blur"}]}}},components:{editTitle:o.a},methods:{init:function(){this.userName=this.$config.login_info.user_info.username},validateNewPassCheck:function(t,e,s){e.length>32||e.length<6?s(new Error("请确认新密码（6-32位）")):/\s+/g.test(e)?s(new Error("密码输入有误")):s()},validatePassCheck:function(t,e,s){e!==this.formValidate.new?s(new Error("确认密码不一致，请检查输入")):s()},cancel:function(){this.$emit("cancel",!1)},ok:function(){var t=this;this.$refs.formValidate.validate(function(e){if(e){var s={user_id:t.$config.login_info.user_info.user_id,old_pwd:h()("smce"+l()(t.formValidate.old)+"2019"),new_pwd:h()("smce"+l()(t.formValidate.new)+"2019"),confirm_pwd:h()("smce"+l()(t.formValidate.confirmNew)+"2019")};t.$axios.put(t.$config.apiDomain+"/user/pwd",s).then(function(){t.$Message.success("已修改"),t.cancel(),setTimeout(function(){window.location.href=t.$config.sys_config.logout_url},2e3)}).catch(function(){})}})}},mounted:function(){this.init()}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mask-bg"},[s("edit-title",{attrs:{disabled:t.saveBtnStatus,title:t.title},on:{"cancel-click":t.cancel,"ok-click":t.ok}}),t._v(" "),s("div",{staticClass:"custom-dialog-content"},[s("div",{staticClass:"common-card"},[s("Form",{ref:"formValidate",staticClass:"mt20",staticStyle:{padding:"0 20px"},attrs:{"label-position":"left","label-width":90,model:t.formValidate,rules:t.ruleValidate}},[s("label",{staticStyle:{display:"none"}},[s("input",{attrs:{type:"password",name:"emptyPwd"}})]),t._v(" "),s("Form-item",{attrs:{label:" 用户名"}},[s("span",[t._v(t._s(t.userName))])]),t._v(" "),s("Form-item",{attrs:{label:"原始密码",prop:"old"}},[s("Input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入原始密码"},model:{value:t.formValidate.old,callback:function(e){t.$set(t.formValidate,"old",e)},expression:"formValidate.old"}})],1),t._v(" "),s("Form-item",{attrs:{label:"新密码",prop:"new"}},[s("Input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入新密码（6-32位）"},model:{value:t.formValidate.new,callback:function(e){t.$set(t.formValidate,"new",e)},expression:"formValidate.new"}})],1),t._v(" "),s("Form-item",{attrs:{label:"确认密码",prop:"confirmNew"}},[s("Input",{attrs:{type:"password",autocomplete:"off",placeholder:"请确认新密码（6-32位）"},model:{value:t.formValidate.confirmNew,callback:function(e){t.$set(t.formValidate,"confirmNew",e)},expression:"formValidate.confirmNew"}})],1)],1)],1)])],1)},staticRenderFns:[]},f=s("VU/8")(u,d,!1,null,null,null).exports,_={name:"Prompt",components:{editTitle:o.a},props:{unread:{type:Number,default:0}},data:function(){return{pageNo:1,loadingOrNoData:"数据加载中...",list:[],msgNum:0,isNoMsg:!1,scrollTip:"",titleList:[{name:"全部",key:"all",isClick:!0},{name:"未读",key:"unread",isClick:!1},{name:"已读",key:"read",isClick:!1}],currentTab:"all"}},created:function(){this.getList(),this.debounceClick=this.$lodash.debounce(this.handleClick,this.$config.debounce_wait)},methods:{handleClick:function(t){var e=this;this.currentTab=t,this.pageNo=1,this.titleList.forEach(function(s){t!==s.key?s.isClick=!1:(s.isClick=!0,e.getList())})},setAllRead:function(){var t=this;if(this.unread){var e=this.$config.apiDomain+"/sys/messages/read/all";this.$axios.put(e).then(function(){t.getList(),t.$emit("get-unread-msg")})}},dealData:function(t,e){var s=this;t&&t.items&&(1===e?this.list=t.items:t.items.forEach(function(t){s.list.push(t)}),this.msgNum=this.list.length,this.msgNum||(this.loadingOrNoData="暂无数据")),t.total<=10*e?(this.scrollTip="",this.isNoMsg=!0):(this.scrollTip="点击加载更多信息",this.isNoMsg=!1)},getList:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.loadingOrNoData="数据加载中...";var i=this.$config.apiDomain+"/sys/messages/list/"+this.currentTab,n={page:s,size:10};this.$axios.get(i,{params:n}).then(function(t){var i=t.data;e.dealData(i,s)}).catch(function(){e.loadingOrNoData="数据加载失败",t&&s<=e.pageNo&&e.pageNo--})},setReadStatus:function(t){var e=this,s=t.message_id,i=this.$config.apiDomain+"/sys/messages/read/message-list",n=[s];this.$axios.put(i,n).then(function(){e.$set(t,"read_status",1)})},viewDetails:function(t){t.read_status||(this.setReadStatus(t),this.$emit("get-unread-msg")),t.isShow?this.$set(t,"isShow",!t.isShow):this.$set(t,"isShow",!0)},handleReachBottom:function(){this.isNoMsg||(this.pageNo++,this.getList(!0,this.pageNo))}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mask-bg"},[s("edit-title",{attrs:{"is-show-btn":!1,title:"消息列表"}}),t._v(" "),s("div",{staticClass:"custom-dialog-content"},[s("div",[s("div",{staticClass:"message-main"},[s("Row",{staticClass:"message-title"},[s("Col",{staticClass:"view-btn",attrs:{span:"12"}},t._l(t.titleList,function(e,i){return s("span",{key:i,class:{selected:e.isClick},on:{click:function(s){t.debounceClick(e.key)}}},[t._v(t._s(e.name))])})),t._v(" "),s("Col",{staticClass:"set-btn",attrs:{span:"12"}},[s("span",{class:{"not-allread":!t.unread},on:{click:t.setAllRead}},[t._v("全部标为已读")])])],1),t._v(" "),[t.msgNum?t._l(t.list,function(e,i){return s("div",{key:i,staticClass:"message-list",on:{click:function(s){t.viewDetails(e,i)}}},[s("div",{staticClass:"message-box content-title"},[s("p",{staticClass:"message-left",class:{"unread-status":!e.read_status}},[e.read_status?t._e():s("i",[t._v("•")]),t._v(" "),s("span",[t._v(t._s(e.message_title))])]),t._v(" "),s("p",{staticClass:"message-right"},[t._v(t._s(t._f("timeLize")(e.create_time)))])]),t._v(" "),s("div",{staticClass:"message-box"},[s("p",{class:{"message-left":!e.isShow}},[t._v(t._s(e.content))])])])}):s("div",{staticClass:"no-message"},[t._v("\n                        "+t._s(t.loadingOrNoData)+"\n                    ")])]],2),t._v(" "),s("p",{staticClass:"scroll-tip",class:{"is-no-msg":t.isNoMsg},on:{click:t.handleReachBottom}},[t._v(t._s(t.scrollTip))])])])],1)},staticRenderFns:[]};var p={data:function(){return{channelList:[],channelId:"",isCollapsed:!1,siteName:"",userName:"",roleName:"",channel_name:"",authInfo:{},isChannelPointer:!!this.$config.login_info.user_channels.length,menu:{activeName:"",openName:[],list:[]},f_notice:!1,f_changePassword:!1,unReadNum:0}},components:{ItemMenu:a,Prompt:s("VU/8")(_,m,!1,function(t){s("ibUh")},"data-v-42c4bef3",null).exports,Password:f},created:function(){this.getUnreadMsg(),setInterval(this.getUnreadMsg,6e5)},mounted:function(){this.init()},watch:{$route:function(t){if("/crowd/detail"===t.path||"/trait/detail"===t.path)this.$config.login_info.current_router="/"+t.path.split("/")[1];else if("/home"===t.path)this.$config.login_info.current_router="/home";else if(t.path.split("/").length>2)return;this.getActiveMenu()}},methods:{layoutCollapse:function(t){var e=this;t&&(this.menu.openName=[],this.$nextTick(function(){e.$refs.menu.updateOpened()}))},init:function(){this.getUserName(),this.getMemuList(),this.getChanneList()},getChanneList:function(){var t=this;this.channelId=this.$config.login_info.cur_channel_id;var e=this.$config.login_info.user_channels;e.forEach(function(e){e.channel_id==t.channel_id&&t.$set(e,"active",!0)}),this.channelList=e},changeRole:function(t){this.channelId!=t&&this.$axios.put(this.$config.apiDomain+"/user/channel?channel_id="+t+"&is_setting_default=false").then(function(){window.location.href=window.location.origin+window.location.pathname})},getUserName:function(){this.siteName=this.$config.sys_config.themes.title||"Smart Marketing Hub",this.roleName=this.$config.login_info.role_name,this.userName=this.$config.login_info.user_info.name,this.channel_name=this.$config.login_info.cur_channel_name,this.authInfo=this.$config.login_info.auth_info},userDropdown:function(t){"0"===t&&(this.f_changePassword=!0),"1"===t&&this.$config.sys_config.logout_url&&window.location.replace(this.$config.sys_config.logout_url)},getMemuList:function(){var t=this;this.menu.list=this.$config.login_info.role_view.menus,this.$nextTick(function(){t.getActiveMenu(),t.Scrollbar.init(t.$refs["menu-scrollbar"])})},getActiveMenu:function(){var t=this,e=this.$config.login_info.current_router,s=[],i="";!function t(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(n){if(n.path===e){if((i=""+n.idx).indexOf("-")<0)return void(s=[]);var a=i.split("-");s=[];for(var o=0;o<a.length-1;o++)0==o?s.push(""+a[o]):s.push(s[o-1]+"-"+a[o])}else n.children&&t(n.children)})}(this.$config.login_info.role_view.menus),this.isCollapsed||(this.menu.openName=s),this.menu.activeName=i,this.$nextTick(function(){t.isCollapsed||!t.isCollapsed&&t.$refs.menu.updateOpened(),t.$refs.menu.updateActiveName()})},openChange:function(t){this.menu.openName=t,t.length&&(this.isCollapsed=!1)},submenuChange:function(t){var e=this;"0"===t&&(this.menu.openName=[],this.$nextTick(function(){e.$refs.menu.updateOpened()}))},cancel:function(t){this.f_changePassword=t},handleMsg:function(){this.f_notice=!0,this.getUnreadMsg()},getUnreadMsg:function(){var t=this,e=this.$config.apiDomain+"/sys/messages/count/unread";this.$axios.get(e).then(function(e){var s=e.data;t.unReadNum=s.result||0})}},computed:{menu_bottom_height:function(){return"112px"}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"warpper-box"},[s("div",{staticClass:"header-menu"},[t._m(0),t._v(" "),s("div",{staticClass:"header-right"},[s("div",{staticClass:"hr-box"},["ROLE_C_ADMIN"===t.authInfo.role_id||"ROLE_D_ADMIN"===t.authInfo.role_id||"ROLE_D_OPERATOR"===t.authInfo.role_id?s("div",{staticClass:"hr-left"},[s("Dropdown",{attrs:{trigger:"click",placement:"bottom-start"},on:{"on-click":t.changeRole}},[s("a",{staticClass:"hr-menu-text",attrs:{href:"javascript:void(0)"}},[s("span",{staticClass:"iconfont icon-device_widgets"}),t._v(" "),s("span",{staticClass:"hr-menu-name"},[t._v(t._s(t.channel_name))]),t._v(" "),s("span",{staticClass:"iconfont icon-nav_arrow_drop_down"})]),t._v(" "),s("DropdownMenu",{staticStyle:{"max-height":"433px","overflow-y":"auto"},attrs:{slot:"list"},slot:"list"},t._l(t.channelList,function(e,i){return s("DropdownItem",{key:i,attrs:{name:e.channel_id,selected:e.channel_id===t.channelId}},[s("div",{staticClass:"role-list-box"},[s("i",{staticClass:"role-icon",class:e.icon_type}),t._v(" "),s("div",{staticClass:"role-name-box"},[s("p",{staticClass:"channel-title"},[t._v(t._s(e.channel_name)+"（"+t._s(e.channel_id)+"）")]),t._v(" "),s("p",{staticClass:"channel-name"},[t._v("\n                                            "+t._s(e.role_name)+"\n                                            "),e.org_id?s("span",[t._v("( "+t._s(e.org_name)+" )")]):t._e()])])])])}))],1)],1):t._e(),t._v(" "),s("div",{staticClass:"hr-right"},[s("span",{on:{click:t.handleMsg}},[s("Badge",{attrs:{dot:"",count:t.unReadNum}},[s("Icon",{attrs:{color:"#CCE1FA",size:"24",type:"md-notifications"}})],1)],1),t._v(" "),s("Drawer",{attrs:{width:"600","mask-closable":!1},model:{value:t.f_notice,callback:function(e){t.f_notice=e},expression:"f_notice"}},[s("div",{attrs:{slot:"title"},slot:"title"}),t._v(" "),t.f_notice?s("prompt",{attrs:{unread:t.unReadNum},on:{"get-unread-msg":t.getUnreadMsg}}):t._e()],1),t._v(" "),s("Dropdown",{attrs:{placement:"bottom-end"},on:{"on-click":t.userDropdown}},[s("span",{staticClass:"hr-avatar"},[t._v(t._s(t.userName.charAt()))]),t._v(" "),s("DropdownMenu",{staticStyle:{padding:"10px 0"},attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{staticStyle:{}},[s("span",{staticClass:"hr-avatar l-avatar"},[t._v(t._s(t.userName.charAt()))]),s("span",{staticClass:"hr-username-box"},[t._v(t._s(t.userName)+"（"),s("i",{staticClass:"role-name"},[t._v(t._s(t.roleName))]),t._v("）")])]),t._v(" "),s("DropdownItem",{directives:[{name:"role-button",rawName:"v-role-button",value:"modify_password_button",expression:"`modify_password_button`"}],attrs:{name:"0"}},[s("span",{staticClass:"user-icon f24 iconfont icon-action_settings"}),t._v("\n                                修改密码\n                            ")]),t._v(" "),s("DropdownItem",{attrs:{name:"1"}},[s("span",{staticClass:"user-icon f24 iconfont icon-action_exit_to_app"}),t._v("\n                                退出登录\n                            ")])],1)],1),t._v(" "),s("Drawer",{attrs:{width:"600","mask-closable":!1},model:{value:t.f_changePassword,callback:function(e){t.f_changePassword=e},expression:"f_changePassword"}},[s("div",{attrs:{slot:"title"},slot:"title"}),t._v(" "),t.f_changePassword?s("password",{on:{cancel:t.cancel}}):t._e()],1)],1)])])]),t._v(" "),s("div",{staticClass:"main-box"},[s("div",{staticClass:"main-left"},[s("Layout",{staticClass:"td-layout-light",style:{minHeight:"100vh"}},[s("Sider",{attrs:{collapsible:"","collapsed-width":78,width:"220px"},on:{"on-collapse":t.layoutCollapse},model:{value:t.isCollapsed,callback:function(e){t.isCollapsed=e},expression:"isCollapsed"}},[t.menu.list.length?s("div",{ref:"menu-scrollbar",staticClass:"left-submenu",style:{bottom:t.menu_bottom_height}},[s("Menu",{ref:"menu",staticStyle:{width:"100%"},attrs:{"active-name":t.menu.activeName,"open-names":t.menu.openName,accordion:""},on:{"on-open-change":t.openChange,"on-select":t.submenuChange}},[t._l(t.menu.list,function(e,i){return[e.children?s("ItemMenu",{key:i,attrs:{data:e,hasIcon:""}}):s("router-link",{key:i,attrs:{to:e.path}},[s("MenuItem",{directives:[{name:"el-title",rawName:"v-el-title",value:e.name,expression:"item.name"}],attrs:{name:""+e.idx}},[s("Icon",{attrs:{type:e.icon||"md-list-box"}}),t._v(t._s(e.name)+"\n                                        ")],1)],1)]})],2)],1):t._e()])],1)],1),t._v(" "),s("div",{staticClass:"main-right"},[s("div",{staticClass:"container-min-width"},[s("router-view")],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header-left"},[e("div",{staticClass:"left-logo"},[e("div",{staticClass:"single-graph"})])])}]};var v=s("VU/8")(p,g,!1,function(t){s("UMtl")},"data-v-57c90293",null);e.default=v.exports},UMtl:function(t,e){},ibUh:function(t,e){},"jnv/":function(t,e){},nErl:function(t,e){(function(e){t.exports=e}).call(e,{})}});