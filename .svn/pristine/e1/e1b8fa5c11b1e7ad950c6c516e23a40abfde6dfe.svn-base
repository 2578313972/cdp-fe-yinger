webpackJsonp([27],{"0Fct":function(t,a){},B7KI:function(t,a){},BQoO:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("CFN8"),i={data:function(){return{title:"订单分析-新增营销对比",saveBtnStatus:!1,loading:!1,columns:[],hasChanged:!1,calculate_status_item:["未开始","活动开始","活动结束"]}},props:{showData:{type:Array,default:[]}},components:{editTitle:n.a},created:function(){var t=this;this.$createElement;this.columns=[{title:"任务名称",key:"display_name"},{title:"任务ID",key:"code",align:"center"},{title:"交易起止时间",align:"center",minWidth:90,render:function(t,a){return t("div",[a.row.start_time_day," 至 ",a.row.end_time_day])}},{title:"状态",align:"center",render:function(a,e){return a("div",[t.calculate_status_item[e.row.calculate_status]])}},{title:"创建时间",minWidth:80,align:"center",render:function(t,a){return t("div",[new Date(a.row.create_time).toLocaleString()])}}]},mounted:function(){},methods:{cancel:function(){this.$emit("cancelCreatEvent",!1)},ok:function(){this.$emit("submitCreatEvent")}}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"slide-create-box"},[e("edit-title",{attrs:{loading:t.saveBtnStatus,title:t.title,disabled:t.hasChanged},on:{"cancel-click":t.cancel,"ok-click":t.ok}}),t._v(" "),e("div",{staticClass:"slide-scroll-box dialog-padding20"},[e("Card",{staticClass:"pl20 pr20",attrs:{"dis-hover":""}},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("新增成功后需要前往"),e("span",{staticStyle:{color:"#57A3F3",display:"inline-block",transform:"translateY(-1.5px)"}},[t._v("订单分析看板")]),t._v("查看")]),t._v(" "),e("p",{staticClass:"padding16-18",staticStyle:{"font-size":"15px","font-weight":"600"}},[t._v("新增如下对比任务：")]),t._v(" "),e("Table",{ref:"table",staticClass:"smce-table-noscroll td-table-no-border",attrs:{loading:t.loading,"no-data-text":"没有可对比的数据",columns:t.columns,data:t.showData}})],1)],1)],1)},staticRenderFns:[]};var c={name:"Group",data:function(){return{name:"",current:1,butNum:0,pageSize:10,butData:["全部","进行中","结束"],loading:!1,creatEvent:!1,calculate_status_item:["未开始","活动开始","活动结束"],columns:[],data:[],allData:[],allDataSize:0,dataChild:[]}},components:{CreateEvent:e("VU/8")(i,s,!1,function(t){e("B7KI")},"data-v-0b6d2360",null).exports},created:function(){this.getData();var t=this.$config.debounce_wait;this.debounceSearch=this.$lodash.debounce(this.changeInput,t),this.debouncePage=this.$lodash.debounce(this.pageChange,t)},methods:{getData:function(){var t=this;return this.loading=!0,this.$axios.get("/cdp-web/marketplugin/orderAnalysis/queryOrderList",{params:{displayName:this.name,page:this.current,rows:this.pageSize}}).then(function(a){t.data=a.data.data,t.data.forEach(function(t){t.action=!1}),t.dataChild.length>0&&t.dataChild.forEach(function(a){var e=t.data.find(function(t){return t.code===a.code});e&&(e.action=!0)}),t.tableColumn(),t.allDataSize=a.data.pageInfo.total,t.loading=!1})},butStatus:function(t){this.butNum!==t&&(this.butNum=t,this.getData())},tableColumn:function(){var t=this;this.$createElement;this.columns=[{title:"人群名称",key:"display_name",width:"200px"},{title:"人群ID",key:"code",align:"center"},{title:"人群数量",key:"code",align:"center"},{title:"状态",align:"center",render:function(a,e){return a("div",[t.calculate_status_item[e.row.calculate_status]])}},{title:"时间",align:"center",minWidth:80,render:function(t,a){return t("div",[a.row.start_time_day," 至 ",a.row.end_time_day])}},{title:"选择",width:150,align:"center",render:function(a,e){return a("Checkbox",{on:{"on-change":function(){t.checkChange(e)}},props:{value:e.row.action,disabled:!e.row.calculate_status}})}}]},changeInput:function(){this.current=1,this.getData()},checkChange:function(t){if(this.data[t.index].action=!this.data[t.index].action,this.data[t.index].action)this.dataChild.push(this.data[t.index]);else{var a=this.data[t.index].code;this.dataChild.splice(this.dataChild.findIndex(function(t){return t.id===a}),1)}},addData:function(){this.dataChild.length>3?this.$Message.error({background:!0,content:"最大对比条数不得超过3条~~"}):this.creatEvent=!0},pageChange:function(t){this.current=t,this.getData()},cancelCreat:function(t){this.creatEvent=t},submitCreat:function(){var t=this;this.$axios.post("/cdp-web/marketplugin/orderAnalysis/addOrderComparedTask",{taskIds:this.dataChild.map(function(t){return t.code}).toString()},{headers:{"Content-Type":"application/json"}}).then(function(a){switch(a.data.success){case"true":t.$Message.success({background:!0,content:a.data.msg});break;default:t.$Message.error({background:!0,content:a.data.msg})}}),this.creatEvent=!1}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-warpper"},[e("div",{staticClass:"page-title bottom-shadow page-title-tab"},[e("Menu",{staticClass:"pl24",attrs:{mode:"horizontal",theme:"light","active-name":1}},[e("MenuItem",{key:0,attrs:{name:1}},[t._v("营销人群对比管理")])],1)],1),t._v(" "),e("div",{staticClass:"page-content page-content-tab padding16-18"},[e("Card",{attrs:{"dis-hover":""}},[e("Row",{staticClass:"code-row-bg padding16-18",attrs:{type:"flex",justify:"space-between"}},[e("i-col",[e("Button-group",t._l(t.butData,function(a,n){return e("i-button",{key:a,attrs:{type:t.butNum===n?"primary":null},on:{click:function(a){t.butStatus(n)}}},[t._v(t._s(a))])})),t._v(" "),e("i-input",{staticClass:"width300",attrs:{icon:"ios-search",placeholder:"输入任务名称"},on:{input:t.debounceSearch},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}}),t._v(" "),e("span",{staticClass:"total-count"},[t._v("\n            共\n            "),e("i",[t._v(t._s(t.allDataSize))]),t._v("个人群（可选对比人群不超过3个）\n          ")])],1),t._v(" "),e("i-col",[e("i-button",{attrs:{size:"large",disabled:!t.dataChild.length,icon:"md-add",type:"primary"},on:{click:t.addData}},[t._v("对比")])],1)],1),t._v(" "),e("Table",{ref:"table",staticClass:"smce-table-noscroll td-table-no-border",attrs:{loading:t.loading,"no-data-text":"暂无数据",columns:t.columns,data:t.data}}),t._v(" "),e("Page",{staticClass:"mt16 padding16-18 ivu-row-flex ivu-row-flex-end",attrs:{current:t.current,"page-size":t.pageSize,total:t.allDataSize,"show-elevator":""},on:{"on-change":t.debouncePage}})],1)],1),t._v(" "),e("Drawer",{attrs:{width:"1100","mask-closable":!1},model:{value:t.creatEvent,callback:function(a){t.creatEvent=a},expression:"creatEvent"}},[t.creatEvent?e("create-event",{attrs:{showData:t.dataChild},on:{cancelCreatEvent:t.cancelCreat,submitCreatEvent:t.submitCreat}}):t._e()],1)],1)},staticRenderFns:[]};var o=e("VU/8")(c,r,!1,function(t){e("0Fct")},"data-v-3c69db55",null);a.default=o.exports}});