webpackJsonp([6],{"4DNR":function(t,e){},"6Fuc":function(t,e){},"6QUk":function(t,e){},CDiT:function(t,e){},Dlel:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"Touch",data:function(){return{crowdData:{event:null,selfTrait:!1,publicTrait:!1,groupTrait:!1,selfCrowd:!0,groupCrowd:!0,disabled:!1,value:{}},removeData:{event:null,selfTrait:!1,publicTrait:!1,groupTrait:!1,selfCrowd:!0,groupCrowd:!0,disabled:!1,value:{}},tagList:[],removeList:{crowdId:"",exportConfig:[]}}},computed:{crowdValue:function(){return this.crowdData.value},removeValue:function(){return this.removeData.value}},methods:{updateCrowd:function(t){this.crowdData.value=t},updateRemoveCrowd:function(t){t.names.length>10||(this.removeData.value=t,this.setObject(t))},setObject:function(t){this.tagList=t.names,this.removeList.exportConfig=t.names.map(function(e,a){return{trait_name:e,trait_code:t.value[a]}})},closeTag:function(t){this.tagList.splice(t,1),this.removeValue.value.splice(t,1),this.removeValue.data_types.splice(t,1),this.removeList.exportConfig.splice(t,1)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-touch mt20"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{staticStyle:{flex:"1"}},[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("人群选择\n                "),a("Tooltip",{attrs:{"max-width":"300",content:"选择一个投放人群，如果是响应形式的可以跳过",placement:"right"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("div",[a("TraitInput",t._b({staticClass:"touch-trait",attrs:{placeholder:"请选择人群",value:t.crowdValue},on:{"on-change":t.updateCrowd}},"TraitInput",t.crowdData,!1))],1)]),t._v(" "),a("Card",{staticClass:"mt16",attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("排除人群\n                "),a("Tooltip",{attrs:{"max-width":"320",content:"可以添加多个排除人群，黑名单优先级最高。（可选）",placement:"right"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("div",[a("TraitInput",t._b({staticClass:"touch-trait",attrs:{isShowTag:!1,placeholder:"请选择去除的人群",value:t.removeValue,multiple:!0},on:{"on-change":t.updateRemoveCrowd}},"TraitInput",t.removeData,!1)),t._v(" "),a("Row",{staticClass:"mt10"},[a("Col",{attrs:{span:"24"}},[a("Tag",{staticClass:"minw400",attrs:{type:"dot",color:"success"}},[t._v("  VIP免打扰客户名单  ")]),t._v(" "),a("span",{staticClass:"crowd-count"},[t._v("200人")])],1)],1),t._v(" "),t._l(t.tagList,function(e,i){return a("Row",{key:i,staticClass:"mt10"},[a("Tag",{staticClass:"minw400",attrs:{type:"dot",color:"success",name:e,closable:""},on:{"on-close":function(e){t.closeTag(i)}}},[a("span",{staticClass:"closeTag"},[t._v("  "+t._s(e)+"  ")])]),t._v(" "),a("span",{staticClass:"crowd-count"},[t._v("200人")])],1)})],2)])],1),t._v(" "),a("Col",{staticStyle:{width:"350px","margin-left":"16px"}},[a("Card",{attrs:{"dis-hover":""}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[t._v("投放人群预估")]),t._v(" "),a("Row",[a("Col",{attrs:{span:"4",offset:"1"}},[a("Icon",{staticStyle:{cursor:"default"},attrs:{type:"ios-people-outline",size:"70",color:"#ccc"}})],1),t._v(" "),a("Col",{attrs:{span:"19"}},[a("ul",{staticClass:"estimate"},[a("li",[a("span",{staticClass:"left-count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.target))])]),a("span",[t._v("目标人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left-count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.exclude))])]),a("span",[t._v("排除人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left-count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.plan))])]),a("span",[t._v("计划人数"+t._s(t.$activity.crowdPrediction.type))])])])])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("oop6"),a("4DNR")},"data-v-552d8a12",null).exports,l={name:"Touch",data:function(){return{propsData:{event:null,selfTrait:!0,publicTrait:!0,groupTrait:!0,selfCrowd:!1,groupCrowd:!1,disabled:!1,value:{}},channelData:this.$activity.touchGateway}},computed:{traitValue:function(){return this.propsData.value}},methods:{updateTrait:function(t){this.propsData.value=t}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-touch mt20"},[a("Row",{attrs:{type:"flex",justify:"space-between"}},[a("Col",{staticStyle:{flex:"1"}},[a("Card",{staticStyle:{"min-height":"192px"},attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("触点选择\n                "),a("Tooltip",{attrs:{"max-width":"300",content:"必须选择一个触点",placement:"right"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("div",{staticClass:"touch_select"},[a("Cascader",{attrs:{placeholder:"请选择触达网关","render-format":function(t){return t.join(" > ")},data:t.channelData,"change-on-select":""}}),t._v(" "),a("TraitInput",t._b({staticClass:"touch_trait mt20",attrs:{placeholder:"请选择触达特性",value:t.traitValue},on:{"on-change":t.updateTrait}},"TraitInput",t.propsData,!1))],1)])],1),t._v(" "),a("Col",{staticStyle:{width:"350px","margin-left":"16px"}},[a("Card",{attrs:{"dis-hover":""}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"title"},slot:"title"},[t._v("投放人群预估")]),t._v(" "),a("Row",[a("Col",{attrs:{span:"4",offset:"1"}},[a("Icon",{staticStyle:{cursor:"default"},attrs:{type:"ios-people-outline",size:"70",color:"#ccc"}})],1),t._v(" "),a("Col",{attrs:{span:"19"}},[a("ul",{staticClass:"estimate"},[a("li",[a("span",{staticClass:"left_count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.target))])]),a("span",[t._v("目标人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left_count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.exclude))])]),a("span",[t._v("排除人群")])]),t._v(" "),a("li",[a("span",{staticClass:"left_count"},[a("span",[t._v(t._s(t.$activity.crowdPrediction.plan))])]),a("span",[t._v("计划人数"+t._s(t.$activity.crowdPrediction.type))])])])])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(t){a("yH48"),a("yK4D")},"data-v-0881a204",null).exports,c=a("7eOT"),p={name:"Mode",components:{Strategy:c.a},data:function(){return{interActiveType:this.$config.interactive_type,noticData:{modeVal:"diytime",dateTime:"2018-08-08 12:24"},eventData:{timeRange:[],eventList:this.$activity.eventList,eventVal:"0",modeVal:"delay",delayTime:2,timeType:"1",countVal:"daily",putInVal:3,dailyVal:4},cycleData:{timeRange:[],cycleTime:"09:09"},dateData:{timeRange:[],delayTime:2,dateTypeList:[{value:"0",label:"开户日"},{value:"1",label:"客户生日"}],dateType:"1",countVal:"putIn",sevenDay:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"}],putInVal:"1",dailyVal:"5",cycleTime:"10:10"},tripResData:{timeRange:["2019-01-01 00:00:00","2019-01-15 23:59:59"],eventList:this.$activity.eventList,eventVal:"1",modeVal:"delay",delayTime:3,timeType:"0",countVal:"daily",putInVal:7,dailyVal:2},tripNoticData:{modeVal:"diytime",dateTime:"2018-08-08 12:24"}}},methods:{noticeDateSelect:function(){},eventDateSelect:function(t){this.eventData.timeRange=[t[0],t[1].substring(0,10)+"23:59:59"]},tripDateSelect:function(t){this.cycleData.timeRange=[t[0],t[1].substring(0,10)+"23:59:59"]},dateDateSelect:function(t){this.dateData.timeRange=[t[0],t[1].substring(0,10)+"23:59:59"]},syChange:function(){}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-mode"},[a("Card",{staticClass:"mt20",attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("发送模式")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.interActiveType,expression:"interActiveType==0"}]},[a("RadioGroup",{model:{value:t.noticData.modeVal,callback:function(e){t.$set(t.noticData,"modeVal",e)},expression:"noticData.modeVal"}},[a("Radio",{attrs:{label:"immediate"}},[t._v("\n                    立即发送\n                    "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"活动时间内，审核通过后立即发送",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"diytime"}},[t._v("\n                    指定在\n                ")]),t._v(" "),a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间"},on:{"on-change":t.noticeDateSelect},model:{value:t.noticData.dateTime,callback:function(e){t.$set(t.noticData,"dateTime",e)},expression:"noticData.dateTime"}}),t._v("\n                发出\n                "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"受发送渠道资源影响，发送的具体时间可能会被延后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.interActiveType,expression:"interActiveType==1"}]},[a("div",[t._v("\n                在\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{editable:!1,type:"daterange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},on:{"on-change":t.eventDateSelect},model:{value:t.eventData.timeRange,callback:function(e){t.$set(t.eventData,"timeRange",e)},expression:"eventData.timeRange"}}),t._v("\n                期间 由\n                "),a("Select",{staticStyle:{width:"180px"},model:{value:t.eventData.eventVal,callback:function(e){t.$set(t.eventData,"eventVal",e)},expression:"eventData.eventVal"}},t._l(t.eventData.eventList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" 触发发出\n            ")],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("发送时机：\n                "),a("RadioGroup",{model:{value:t.eventData.modeVal,callback:function(e){t.$set(t.eventData,"modeVal",e)},expression:"eventData.modeVal"}},[a("Radio",{attrs:{label:"immediate"}},[t._v("\n                        立即发送\n                    ")]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"delay"}},[t._v("\n                        延迟发送\n                    ")]),t._v("\n                    延迟\n                    "),a("Input",{staticStyle:{width:"110px"},model:{value:t.eventData.delayTime,callback:function(e){t.$set(t.eventData,"delayTime",e)},expression:"eventData.delayTime"}},[a("Select",{staticStyle:{width:"60px"},attrs:{slot:"append"},slot:"append",model:{value:t.eventData.timeType,callback:function(e){t.$set(t.eventData,"timeType",e)},expression:"eventData.timeType"}},[a("Option",{attrs:{value:"0"}},[t._v("小时")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("天")])],1)],1),t._v(" "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"最大延迟期限30天",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("次数限定：\n                "),a("RadioGroup",{model:{value:t.eventData.countVal,callback:function(e){t.$set(t.eventData,"countVal",e)},expression:"eventData.countVal"}},[a("Radio",{attrs:{label:"noLimit"}},[t._v("\n                        不限\n                    ")]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"putIn"}},[t._v("\n                        投放内仅\n                        "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.eventData.putInVal,callback:function(e){t.$set(t.eventData,"putInVal",t._n(e))},expression:"eventData.putInVal"}}),t._v("\n                        次\n                    ")],1),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"daily"}},[t._v("\n                        每天最多\n                        "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.eventData.dailyVal,callback:function(e){t.$set(t.eventData,"dailyVal",t._n(e))},expression:"eventData.dailyVal"}}),t._v("\n                        次\n                    ")],1)],1)],1),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.interActiveType,expression:"interActiveType==2"}]},[a("div",[t._v("\n                人群更新周期为每月1号，在\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{editable:!1,type:"daterange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},on:{"on-change":t.tripDateSelect},model:{value:t.cycleData.timeRange,callback:function(e){t.$set(t.cycleData,"timeRange",e)},expression:"cycleData.timeRange"}}),t._v("\n                期间，人群更新完成后，在指定发送时间发送\n            ")],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("\n                指定发送时间：\n                "),a("TimePicker",{staticStyle:{width:"112px"},attrs:{format:"HH:mm",placeholder:"选择时间"},model:{value:t.cycleData.cycleTime,callback:function(e){t.$set(t.cycleData,"cycleTime",e)},expression:"cycleData.cycleTime"}})],1),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.interActiveType,expression:"interActiveType==3"}]},[a("div",[t._v("\n                在\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{editable:!1,type:"daterange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},on:{"on-change":t.dateDateSelect},model:{value:t.dateData.timeRange,callback:function(e){t.$set(t.dateData,"timeRange",e)},expression:"dateData.timeRange"}}),t._v("\n                期间 由\n                "),a("Select",{staticStyle:{width:"100px"},attrs:{slot:"append"},slot:"append",model:{value:t.dateData.dateType,callback:function(e){t.$set(t.dateData,"dateType",e)},expression:"dateData.dateType"}},t._l(t.dateData.dateTypeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" 到达触发发出\n                "),a("div",{staticClass:"mt20"},[t._v("\n                    发送时机：\n                    "),a("RadioGroup",{model:{value:t.dateData.countVal,callback:function(e){t.$set(t.dateData,"countVal",e)},expression:"dateData.countVal"}},[a("Radio",{attrs:{label:"today"}},[t._v("\n                            当天发出\n                        ")]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"putIn"}},[t._v("\n                            提前\n                        ")]),t._v(" "),a("Select",{staticStyle:{width:"50px"},model:{value:t.dateData.putInVal,callback:function(e){t.$set(t.dateData,"putInVal",e)},expression:"dateData.putInVal"}},t._l(t.dateData.sevenDay,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" 天发出\n                        "),a("Radio",{staticClass:"ml10",attrs:{label:"daily"}},[t._v("\n                            延后\n                        ")]),t._v(" "),a("Select",{staticStyle:{width:"50px"},model:{value:t.dateData.dailyVal,callback:function(e){t.$set(t.dateData,"dailyVal",e)},expression:"dateData.dailyVal"}},t._l(t.dateData.sevenDay,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" 天发出\n                    ")],1)],1)],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("\n                指定发送时间：\n                "),a("TimePicker",{staticStyle:{width:"112px"},attrs:{format:"HH:mm",placeholder:"选择时间"},model:{value:t.dateData.cycleTime,callback:function(e){t.$set(t.dateData,"cycleTime",e)},expression:"dateData.cycleTime"}})],1),t._v(" "),a("div",{staticClass:"mt16"},[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==t.interActiveType,expression:"interActiveType==4"}]},[a("div",[t._v("\n                在旅程期间\n                "),a("DatePicker",{staticStyle:{width:"280px"},attrs:{disabled:"",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间区间"},model:{value:t.tripResData.timeRange,callback:function(e){t.$set(t.tripResData,"timeRange",e)},expression:"tripResData.timeRange"}}),t._v("\n                由\n                "),t._v(" "),a("Select",{staticStyle:{width:"180px"},attrs:{disabled:""},model:{value:t.tripResData.eventVal,callback:function(e){t.$set(t.tripResData,"eventVal",e)},expression:"tripResData.eventVal"}},t._l(t.tripResData.eventList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" 触发发出\n            ")],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("发送时机：\n                "),a("RadioGroup",{model:{value:t.tripResData.modeVal,callback:function(e){t.$set(t.tripResData,"modeVal",e)},expression:"tripResData.modeVal"}},[a("Radio",{attrs:{label:"immediate"}},[t._v("\n                        立即发送\n                    ")]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"delay"}},[t._v("\n                        延迟发送\n                    ")]),t._v("\n                    延迟\n                    "),a("Input",{staticStyle:{width:"110px"},model:{value:t.tripResData.delayTime,callback:function(e){t.$set(t.tripResData,"delayTime",e)},expression:"tripResData.delayTime"}},[a("Select",{staticStyle:{width:"60px"},attrs:{slot:"append"},slot:"append",model:{value:t.tripResData.timeType,callback:function(e){t.$set(t.tripResData,"timeType",e)},expression:"tripResData.timeType"}},[a("Option",{attrs:{value:"0"}},[t._v("小时")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("天")])],1)],1),t._v(" "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"最大延迟期限30天",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)],1),t._v(" "),a("div",{staticClass:"mt20"},[t._v("次数限定：\n                "),a("RadioGroup",{model:{value:t.tripResData.countVal,callback:function(e){t.$set(t.tripResData,"countVal",e)},expression:"tripResData.countVal"}},[a("Radio",{attrs:{label:"noLimit"}},[t._v("\n                        不限\n                    ")]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"putIn"}},[t._v("\n                        投放内仅\n                        "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.tripResData.putInVal,callback:function(e){t.$set(t.tripResData,"putInVal",t._n(e))},expression:"tripResData.putInVal"}}),t._v("\n                        次\n                    ")],1),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"daily"}},[t._v("\n                        每天最多\n                        "),a("InputNumber",{staticStyle:{width:"50px"},model:{value:t.tripResData.dailyVal,callback:function(e){t.$set(t.tripResData,"dailyVal",t._n(e))},expression:"tripResData.dailyVal"}}),t._v("\n                        次\n                    ")],1)],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:5==t.interActiveType,expression:"interActiveType==5"}]},[a("div",[t._v("\n                XX投放单元第N步漏出/转化/裂变人群旅程\n                "),a("p",{staticClass:"mt10"},[t._v("\n                    起止时间：2018-12-01 08:50:00 至 2018-12-06 23:59:59\n                    "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"发送时间必须在该旅程完全结束后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)]),t._v(" "),a("div",{staticClass:"mt20"},[a("RadioGroup",{model:{value:t.tripNoticData.modeVal,callback:function(e){t.$set(t.tripNoticData,"modeVal",e)},expression:"tripNoticData.modeVal"}},[a("Radio",{attrs:{label:"immediate"}},[t._v("\n                        立即发送"),a("span",{staticStyle:{color:"#999"}},[t._v("（审核通过后，且活动开始时）")]),t._v(" "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"审核通过后，所选旅程完全结束后立即发送",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"diytime"}},[t._v("\n                        指定在\n                        "),a("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间"},model:{value:t.tripNoticData.dateTime,callback:function(e){t.$set(t.tripNoticData,"dateTime",e)},expression:"tripNoticData.dateTime"}}),t._v("\n                        发出\n                        "),a("Tooltip",{attrs:{transfer:"","max-width":"200",content:"受发送渠道资源影响，发送的具体时间可能会被延后",placement:"top"}},[a("i",{staticClass:"fa fa-question-circle-o"})])],1)],1)],1)])])],1)},staticRenderFns:[]};var d=a("VU/8")(p,v,!1,function(t){a("6QUk")},"data-v-b38f8268",null).exports,u=a("woOf"),m=a.n(u),h=a("d32x"),_={name:"Content",components:{TraitInput:h.a},computed:{traitVal:function(){return this.propsData.value}},watch:{value:function(){this.value.length?this.mockValue=this.$activity.content.previewContent:this.mockValue=""}},data:function(){return{mockValue:"",url:"",value:"",userVal:"",userList:this.$activity.content.userList,propsData:{event:null,selfTrait:!0,publicTrait:!0,groupTrait:!0,selfCrowd:!1,groupCrowd:!1,disabled:!1,value:{}}}},methods:{insertUrl:function(){var t=this;this.$Modal.confirm({render:function(e){return e("Input",{props:{autofocus:!0,placeholder:"请输入链接"},on:{input:function(e){t.url=e}}})},width:640,title:"插入链接",onOk:function(){t.value+=t.url,t.url=""}})},insertTrait:function(){var t=this;this.$Modal.confirm({render:function(e){return e(h.a,{props:m()(t.propsData,{value:t.traitVal}),on:{"on-change":function(e){t.propsData.value=e}},style:{width:"100%"}})},width:640,height:600,title:"插入特性",onOk:function(){t.value+="{"+t.traitVal.names[0]+"}",t.propsData.value={}}})},send:function(){var t=this;this.$Modal.confirm({title:"提示",content:"确定发送短信吗",onOk:function(){t.$Message.success({content:"短信已发送",duration:5})}})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-content"},[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("文本内容")]),t._v(" "),a("Row",[a("Col",{staticClass:"edit-wrapper",attrs:{span:"15"}},[a("div",[a("Input",{attrs:{type:"textarea",autosize:{minRows:7},placeholder:t.$activity.content.defaultTip},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("Row",{staticClass:"btn-wrapper"},[a("Col",{attrs:{span:"12"},nativeOn:{click:function(e){return t.insertTrait(e)}}},[a("span",[t._v("+ 插入特性")])]),t._v(" "),a("Col",{attrs:{span:"12"},nativeOn:{click:function(e){return t.insertUrl(e)}}},[a("span",[t._v("+ 插入链接")])])],1)],1),t._v(" "),a("Row",{staticClass:"send"},[a("Col",{staticClass:"send-item",attrs:{span:"3"}},[a("span",[t._v("发送到手机")])]),t._v(" "),a("Col",{staticClass:"send-item",attrs:{span:"18"}},[a("Select",{attrs:{filterable:"",multiple:""},model:{value:t.userVal,callback:function(e){t.userVal=e},expression:"userVal"}},t._l(t.userList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                                "+t._s(e.label)+"\n                            ")])}))],1),t._v(" "),a("Col",{staticClass:"send-item",attrs:{span:"3"}},[a("Button",{attrs:{type:"primary",disabled:!t.userVal.length||!t.value.trim()},on:{click:t.send}},[t._v("发送")])],1)],1)],1),t._v(" "),a("Col",{staticClass:"view-wrapper",attrs:{span:"9"}},[a("Card",{staticClass:"view-card",attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("预览")]),t._v(" "),a("p",{staticClass:"content"},[t._v(t._s(t.mockValue))])]),t._v(" "),a("p",{staticClass:"tip-wrapper"},[a("span",[t._v("预计 "+t._s(t.mockValue.length)+" 个字， "+t._s(Math.ceil(t.mockValue.length/70))+" 条短信\n                        "),a("Tooltip",{attrs:{"max-width":"240",transfer:"",content:"插入的特性以8个字符（4个字）长度计算，实际字数可能会发生变化"}},[t._v("\n                             "),a("i",{staticClass:"fa fa-question-circle-o f14"})])],1)])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(_,y,!1,function(t){a("E4yA")},"data-v-92b5c130",null).exports,C={name:"Report",components:{EditInput:a("mps7").a,Strategy:c.a},computed:{totalList:function(){return this.staticList.concat(this.dynamicList)},isCanAddStep:function(){return 7!==this.staticList.length+this.dynamicList.length}},data:function(){return{value:1,title:"",touchVal:"",isShowConfig:!0,touchList:this.$activity.eventList,staticList:[{name:"步骤",content:"计划发送"},{name:"步骤",content:"预计发送"},{name:"步骤",content:"发送成功"}],dynamicList:[{name:"步骤",content:"触发事件：点击短链",isSpread:!0,isTitleView:!0,isExact:!1,isFission:!1}],conditions:[]}},methods:{editStepName:function(t,e,a){this.dynamicList[a]=m()(this.dynamicList[a],{content:e,isTitleView:!0})},changeStatus:function(t,e){this.dynamicList[e].isTitleView=t},handleSpread:function(t,e){void 0===e?this[t]=!this[t]:this.dynamicList[e].isSpread=!this.dynamicList[e].isSpread},handleDelete:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除步骤"+t+"吗",onOk:function(){e.dynamicList.splice(t,1)}})},addStep:function(){this.staticList.length+this.dynamicList.length<7&&(this.dynamicList.push({name:"步骤",content:"触发事件：点击短链",isSpread:!0,isTitleView:!0,isExact:!1,isFission:!1}),this.isShowConfig=!0)},syChange:function(){}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-report"},[a("Form",[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("漏斗配置")]),t._v(" "),a("Row",{staticClass:"step-sub-title"},[a("Col",{attrs:{span:"5"}},[a("span",{staticClass:"item"},[t._v("漏斗窗口期")]),t._v(" "),a("InputNumber",{staticClass:"item",attrs:{max:90,min:0},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("span",{staticClass:"item"},[t._v("天")]),t._v(" "),a("Tooltip",{attrs:{"max-width":"200",transfer:"",content:"配置进入漏斗到最后一步的最大转化时间"}},[a("i",{staticClass:"fa fa-question-circle-o f14"})])],1),t._v(" "),a("Col",{staticClass:"step-title-list-wrapper",attrs:{span:"19"}},[a("transition",{attrs:{name:"fade"}},[t.isShowConfig?t._e():a("span",{staticClass:"step-title-list"},t._l(t.totalList,function(e,i){return a("span",{key:i,staticClass:"lite-detail"},[a("span",{key:"name"},[t._v("步骤"+t._s(i+1)+"：")]),t._v(" "),a("span",{key:"content"},[t._v(t._s(e.content)+"   ")])])}))]),t._v(" "),a("Icon",{staticClass:"spread-icon",class:{down:t.isShowConfig},attrs:{type:"ios-arrow-forward",size:"18"},on:{click:function(e){t.handleSpread("isShowConfig")}}})],1)],1),t._v(" "),a("Divider",{directives:[{name:"show",rawName:"v-show",value:!t.isShowConfig,expression:"!isShowConfig"}],staticClass:"line"}),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowConfig,expression:"isShowConfig"}]},[t._l(t.staticList,function(e,i){return[a("Card",{key:e.index,staticClass:"simple-step",attrs:{"dis-hover":""}},[a("span",{staticClass:"item"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"step-icon item"},[t._v(t._s(i+1))]),t._v(" "),a("span",{staticClass:"item"},[t._v(t._s(e.content))])])]}),t._v(" "),t._l(t.dynamicList,function(e,i){return a("Card",{key:i,staticClass:"complex-step",attrs:{"dis-hover":""}},[a("div",{staticClass:"complex-content-wrapper"},[a("div",{staticClass:"step-title"},[a("span",{staticClass:"item"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"step-icon item"},[t._v(t._s(t.staticList.length+i+1))]),t._v(" "),a("EditInput",{staticClass:"edit-title item",attrs:{content:e.content,"edit-show":e.isTitleView},on:{"change-status":function(e){return t.changeStatus(e,i)},"confirm-info":function(e,a){return t.editStepName(e,a,i)}}}),t._v(" "),a("span",{staticClass:"icon-wrapper"},[a("Icon",{staticClass:"item",attrs:{type:"ios-trash",size:"18"},on:{click:function(e){t.handleDelete(i)}}}),t._v(" "),a("Icon",{staticClass:"item",class:{down:e.isSpread},attrs:{type:"ios-arrow-forward",size:"18"},on:{click:function(e){t.handleSpread("isShowItem",i)}}})],1)],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[e.isSpread?a("Card",{staticClass:"step-content",attrs:{"dis-hover":""}},[a("Row",{attrs:{slot:"title"},slot:"title"},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"item"},[t._v("触发事件")]),t._v(" "),a("Select",{staticClass:"event-choice item",model:{value:t.touchVal,callback:function(e){t.touchVal=e},expression:"touchVal"}},t._l(t.touchList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Col",{staticClass:"choice-item",attrs:{span:"6"}},[a("span",{staticClass:"item"},[t._v("是否精准")]),t._v(" "),a("i-switch",{staticClass:"item",attrs:{size:"large"},model:{value:e.isExact,callback:function(a){t.$set(e,"isExact",a)},expression:"item.isExact"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("ON")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("OFF")])]),t._v(" "),a("Tooltip",{staticClass:"item",attrs:{"max-width":"200",transfer:"",content:"打开后事件必须携带UID"}},[a("i",{staticClass:"fa fa-question-circle-o f14"})])],1),t._v(" "),a("Col",{staticClass:"choice-item",attrs:{span:"10"}},[a("span",{staticClass:"item"},[t._v("是否包含裂变")]),t._v(" "),a("i-switch",{staticClass:"item",attrs:{size:"large"},model:{value:e.isFission,callback:function(a){t.$set(e,"isFission",a)},expression:"item.isFission"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("ON")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("OFF")])]),t._v(" "),a("Tooltip",{staticClass:"item",attrs:{"max-width":"200",transfer:"",content:"打开后UID必须包含在上一个步骤中"}},[a("i",{staticClass:"fa fa-question-circle-o f14"})])],1)],1),t._v(" "),a("div",[a("Strategy",{attrs:{isEdit:!0},on:{"on-change":t.syChange}})],1)],1):t._e()],1)],1)])})],2)]),t._v(" "),a("Button",{staticClass:"add-step",attrs:{type:"primary",disabled:!t.isCanAddStep},on:{click:t.addStep}},[t._v("添加步骤")])],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(C,b,!1,function(t){a("P0NS")},"data-v-8c373370",null).exports,g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-preview"},[a("p",{staticClass:"date-interval"},[t._v("投放时间：\n        "),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.advertiseTime.from))]),t._v("\n        至\n        "),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.advertiseTime.to))])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("人群")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(0)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v(t._s(t.preview.crowd.traitName)+"："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.originNum)+"人")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("人群类型："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.crowdType))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("最后更新时间："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.updateTime))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("计划投放人数："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.planNum)+"人")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("去除人数："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.crowd.minusNum)+"人")])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("触点")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(1)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("渠道："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.channelType))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("触点："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.touchType))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("短信预计发送："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.planSendNum))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("触达率："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.touch.touchRatio)+"%")])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("模式")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(2)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("交互模式："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.mode.interactiveMode))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("发出时间："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.mode.sendTime))])]),t._v(" "),a("span",{staticClass:"item"},[t._v("筛选条件："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.mode.condition))])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("内容")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(3)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("文本："),a("span",{staticClass:"key-content"},[t._v(t._s(t.preview.content))])])])]),t._v(" "),a("Card",{staticClass:"card-wrapper",attrs:{"dis-hover":""}},[a("p",{staticClass:"title-wrapper"},[a("Icon",{attrs:{type:"md-checkmark-circle-outline green-icon",size:"16"}}),t._v(" "),a("span",{staticClass:"title"},[t._v("报告")]),t._v(" "),a("i",{staticClass:"edit ivu-icon ivu-icon-md-create f14",on:{click:function(e){t.jumpToTab(4)}}})],1),t._v(" "),a("p",{staticClass:"content-wrapper"},[a("span",{staticClass:"item"},[t._v("第一节点："),a("span",{staticClass:"key-content"},[t._v("计划发送")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("第二节点："),a("span",{staticClass:"key-content"},[t._v("预计发送")])]),t._v(" "),a("span",{staticClass:"item"},[t._v("第三节点："),a("span",{staticClass:"key-content"},[t._v("实际发送")])]),t._v(" "),t._l(t.preview.report,function(e){return[a("span",{staticClass:"item"},[t._v("第"+t._s(e.step)+"节点："),a("span",{staticClass:"key-content"},[t._v(t._s(e.title))])])]})],2)])],1)},staticRenderFns:[]};var k=a("VU/8")({name:"Preview",data:function(){return{preview:this.$activity.preview}},methods:{jumpToTab:function(t){this.$tools.bus.$emit("handle-click-step",t)}}},g,!1,function(t){a("EI0F")},"data-v-3e47dd09",null).exports,x=a("mvHQ"),T=a.n(x),D=["#FACC14","#1890FF","#2FC25B","#223273","#8453E0","#13C2C2","#3436C7"],V=["rgba(250,204,20, 0.65)","rgba(24,144,255, 0.65)","rgba(47,194,91, 0.65)","rgba(34,50,115, 0.65)","rgba(132,83,224, 0.65)","rgba(19,194,194, 0.65)","rgba(52,54,199, 0.65)"],S={name:"Result",data:function(){var t=this;return{wordWidth:this.$lodash.clone(this.$activity.stepBarData.xData).sort(function(t,e){return e.length-t.length}),downItemList:this.$activity.downItemList,indeterminate:!0,checkAll:!1,checkAllGroup:[1,2,3],tabList:[{name:"crowd",label:"人群报告"},{name:"count",label:"次数报告"}],buttonList:[{value:"24小时",key:"hour"},{value:"日",key:"day"},{value:"周",key:"week"},{value:"月",key:"month"}],buttonActive:"week",subTabList:this.$activity.subTabList,tabActive:"putIn",topList:[{top:140,cTop:170},{top:100,cTop:128},{top:76,cTop:102},{top:60,cTop:85},{top:48,cTop:75}],ratioList:[],barChart:null,barOption:{grid:{top:0,left:"0",right:"5%",bottom:"0",containLabel:!0},xAxis:{position:"top",type:"value",axisLine:{lineStyle:{color:"#e8eaec",width:1}},splitLine:{lineStyle:{color:"#e8eaec"}},axisLabel:{textStyle:{color:"#333"},formatter:function(e){return Math.ceil(e/t.$activity.stepBarData.yData1[0]*100)+"%"}}},yAxis:{type:"category",axisLine:{lineStyle:{color:"#e8eaec",width:1}},axisLabel:{interval:0,textStyle:{color:"#333"},formatter:function(t){var e="",a=t.length,i=Math.ceil(a/6);if(i>1){for(var s=0;s<i;s++){var n=6*s,l=n+6;e+=t.substring(n,l)+"\n"}return e}return t}},data:JSON.parse(T()(this.$activity.stepBarData.xData)).reverse()},series:[{type:"bar",stack:"总量",barWidth:"30",color:function(e){return D[t.$activity.stepBarData.yData1.length-1-e.dataIndex]},label:{normal:{show:!0,position:"inside"}},data:JSON.parse(T()(this.$activity.stepBarData.yData1)).reverse()},{type:"bar",stack:"总量",color:function(e){return V[t.$activity.stepBarData.yData1.length-1-e.dataIndex]},label:{normal:{show:!0,position:"inside"}},data:JSON.parse(T()(this.$activity.stepBarData.yData2)).reverse()}]},lineChart:null,lineOption:{tooltip:{trigger:"axis"},legend:{data:this.$activity.stepLineData.yData.map(function(t){return t.name}),top:10,right:10},grid:{left:"30",right:"20",bottom:"25",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,axisLine:{lineStyle:{color:"#e8eaec",width:1}},splitLine:{lineStyle:{color:"#e8eaec"}},axisLabel:{textStyle:{color:"#333"}},data:this.$activity.stepLineData.xData},yAxis:{type:"value",axisLine:{lineStyle:{color:"#e8eaec",width:1}},axisLabel:{textStyle:{color:"#333"}}},series:this.$activity.stepLineData.yData,dataZoom:[{type:"slider",start:0,end:100,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleStyle:{color:"#3d88f2"},fillerColor:"#edf1f5",borderColor:"#e6e9ed",showDataShadow:!1,showDetail:!1,textStyle:{color:"#3d88f2"},height:16,bottom:0}]}}},methods:{subTabActiveFn:function(t){this.tabActive=t},buttonActiveFn:function(t){this.buttonActive=t},chartResizeFn:function(){var t=this;this.$nextTick(function(){t.barChart.resize(),t.lineChart.resize()})},handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkAllGroup=this.downItemList.map(function(t){return t.value}):this.checkAllGroup=[]},checkAllGroupChange:function(t){3===t.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1)}},created:function(){for(var t=this.$activity.stepBarData.yData1,e=0;e<t.length;e++)if(e>0){var a=(""+t[e-1]/t[e]).split(".");this.ratioList.push(1e4*(a[0]+"."+a[1].substring(0,4))/100)}var i=this.$config.debounce_wait;this.subTabStatus=this.$lodash.debounce(this.subTabActiveFn,i),this.buttonStatus=this.$lodash.debounce(this.buttonActiveFn,i)},mounted:function(){var t=this;this.barChart=this.barChart||this.echarts.init(this.$refs.bar_chart),this.barChart.setOption(this.barOption),this.lineChart=this.lineChart||this.echarts.init(this.$refs.line_chart),this.lineChart.setOption(this.lineOption),this.$nextTick(function(){window.addEventListener("resize",t.chartResizeFn)})},watch:{$route:function(t,e){}},destroyed:function(){window.removeEventListener("resize",this.chartResizeFn)}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertise-result"},[a("Row",{staticClass:"mt20",attrs:{type:"flex",justify:"space-between"}},[a("Col",{attrs:{span:"10"}},[a("div",{staticClass:"step_warpper",style:{left:t.wordWidth[0].length<6?12*t.wordWidth[0].length+"px":"72px"}},t._l(t.ratioList,function(e,i){return a("div",{key:i,staticClass:"step_ratio",style:{opacity:1-i/10,top:i*t.topList[t.ratioList.length-2].top+t.topList[t.ratioList.length-2].cTop+"px"}},[t._v(t._s(e)+"%")])})),t._v(" "),a("div",{ref:"bar_chart",staticClass:"chart"})]),t._v(" "),a("Col",{attrs:{span:"14"}},[a("div",{staticClass:"sub_tab_list"},[a("ButtonGroup",t._l(t.subTabList,function(e,i){return a("Button",{key:i,staticClass:"sub_tab_width",attrs:{type:e.key==t.tabActive?"primary":"default"},on:{click:function(a){t.subTabStatus(e.key)}}},[t._v("\n                    "+t._s(e.value)+"\n                ")])}))],1),t._v(" "),a("div",{staticClass:"box-flex"},[a("div",{staticClass:"btn_list flex1"},[a("ButtonGroup",t._l(t.buttonList,function(e,i){return a("Button",{key:i,staticClass:"btn_width",attrs:{size:"small",type:e.key==t.buttonActive?"primary":"default"},on:{click:function(a){t.buttonStatus(e.key)}}},[t._v("\n                        "+t._s(e.value)+"\n                    ")])}))],1),t._v(" "),a("div",{staticClass:"down_box"},[a("Dropdown",{staticStyle:{"max-height":"300px"},attrs:{placement:"bottom-end",transfer:""}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                        下载CSV\n                        "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),t._v(" "),a("DropdownMenu",{staticStyle:{width:"180px"},attrs:{slot:"list"},slot:"list"},[a("Checkbox",{staticClass:"down_item",attrs:{indeterminate:t.indeterminate,value:t.checkAll},nativeOn:{click:function(e){return e.preventDefault(),t.handleCheckAll(e)}}},[t._v("全选")]),t._v(" "),a("div",{staticStyle:{height:"135px","overflow-y":"auto"}},[a("CheckboxGroup",{on:{"on-change":t.checkAllGroupChange},model:{value:t.checkAllGroup,callback:function(e){t.checkAllGroup=e},expression:"checkAllGroup"}},t._l(t.downItemList,function(e){return a("Checkbox",{key:e.value,staticClass:"down_item",attrs:{label:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("div",{staticClass:"down_btn"},[a("Button",{attrs:{size:"small",type:"primary"}},[t._v("导出")])],1)],1)],1)],1)]),t._v(" "),a("div",{ref:"line_chart",staticClass:"chart line_chart"})])],1)],1)},staticRenderFns:[]};var $={name:"Detail",components:{Crowd:n,Touch:r,Mode:d,Content:f,Report:w,Preview:k,Result:a("VU/8")(S,R,!1,function(t){a("z8m4"),a("CDiT")},"data-v-2504cf42",null).exports,Creat:a("y5lb").a},data:function(){return{stepFixed:!1,fixedWidth:0,disEditBtn:!1,title:"修改基本信息",stepStatus:null,currentClick:null,returnList:"",current:0,nextBtnType:!1,breadcrumb:this.$activity.breadcrumb,responseType:[{label:"单次通知",value:"0"},{label:"事件响应",value:"1"},{label:"周期性通知",value:"2"},{label:"日期通知",value:"3"},{label:"旅程响应",value:"4"},{label:"旅程通知",value:"5"}],tabList:[{name:"人群",keyName:"Crowd"},{name:"触点",keyName:"Touch"},{name:"模式",keyName:"Mode"},{name:"内容",keyName:"Content"},{name:"报告",keyName:"Report"},{name:"预览",keyName:"Preview"}],tabView:"Crowd",creatUnit:!1,editContent:this.$activity.editContent}},computed:{buttonText:function(){return 5!==this.current?"下一步":"Preview"===this.tabView?"提交":"Result"===this.tabView?(this.disEditBtn=!0,this.nextBtnType=!0,"投放中"):null!==this.currentClick?"提交":void(this.nextBtnType=!1)}},watch:{},mounted:function(){var t=this;this.initData(),this.$tools.bus.$on("handle-click-step",function(e,a){a?(t.currentClick=null,t.current=e,t.tabView=t.tabList[e].keyName):t.handleClickStep(e)})},beforeDestroy:function(){this.$tools.bus.$off("handle-click-step"),window.removeEventListener("resize",this.fixedStep),document.querySelector(".main-right").removeEventListener("scroll",function(){})},methods:{initData:function(){var t=this;this.returnList={path:"/activity/list",query:{}},this.$nextTick(function(){t.fixedStep(),window.addEventListener("resize",t.fixedStep)})},fixedStep:function(){var t=this,e=document.querySelector(".scroll-wrap"),a=document.querySelector(".detail-box").offsetTop,i=document.querySelector(".step-wrapper");this.fixedWidth=document.querySelector(".relative-top").clientWidth,e.addEventListener("scroll",function(){i.style.width=t.fixedWidth+"px",e.scrollTop>a+160-74?(t.stepFixed=!0,i.style.left=247-e.scrollLeft+"px"):(t.stepFixed=!1,i.style.left="auto")})},next:function(){var t=this;if(this.currentClick=null,this.tabView=null,this.stepStatus=null,"Result"!=this.tabView){if(!(this.current<5))return this.tabView="Result",void(this.stepStatus="finish");this.current+=1,this.stepStatus="process";var e=this.tabList.find(function(e,a){return t.current===a});this.tabView=e.keyName}},handleClickStep:function(t,e){"Result"!=this.tabView&&this.current>=t&&(this.stepStatus=null,e&&e.keyName?this.tabView=e.keyName:this.tabView=this.tabList[t].keyName,this.currentClick=t,this.stepStatus="finish")},editUtil:function(){this.creatUnit=!0},cancel:function(){this.creatUnit=!1},ok:function(){this.creatUnit=!1}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"advertising-detail w100 h100"},[a("Row",{staticClass:"details-title",attrs:{type:"flex",justify:"space-between"}},[a("Col",[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:t.returnList}},[t._v("返回列表")]),t._v(" "),a("BreadcrumbItem",{attrs:{to:t.returnList}},[t._v(t._s(t.breadcrumb[0]))]),t._v(" "),a("BreadcrumbItem",[t._v(t._s(t.breadcrumb[1]))])],1)],1)],1),t._v(" "),a("div",{staticClass:"scroll-wrap"},[a("Card",{staticClass:"detail-box m10",attrs:{"dis-hover":""}},[a("Row",[a("Col",{attrs:{span:"10"}},[a("Row",{staticClass:"detail-height"},[a("Col",{attrs:{span:"4"}},[a("span",[t._v("所属活动：")])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Tooltip",{attrs:{content:t.editContent.activity}},[a("p",{staticClass:"ml10 ellipsis"},[t._v(t._s(t.editContent.activity))])])],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("span",[t._v("交互类型：")])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"ml10"},[t._v(t._s(t.responseType[t.$config.interactive_type].label)+" 营销类")])])],1),t._v(" "),a("Row",{staticClass:"detail-height"},[a("Col",{attrs:{span:"4"}},[a("span",[t._v("投放单元ID：")])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"ml10"},[t._v("DU19011469")])]),t._v(" "),a("Col",{attrs:{span:"4"}},[a("span",[t._v("投放类别：")])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"ml10"},t._l(t.editContent.putType,function(e,i){return a("Tag",{key:i},[t._v(t._s(e))])}))])],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-top":"8px"}},[a("Col",{attrs:{span:"2"}},[a("div",[t._v("描述：")])]),t._v(" "),a("Col",{attrs:{span:"22"}},[a("Input",{staticStyle:{width:"400px"},attrs:{readonly:"",type:"textarea",autosize:{minRows:2.5,maxRows:2.5},placeholder:"暂无描述"},model:{value:t.editContent.description,callback:function(e){t.$set(t.editContent,"description",e)},expression:"editContent.description"}})],1)],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"2"}},[a("Button",{staticClass:"mt10",attrs:{disabled:t.disEditBtn,type:"dashed",icon:"md-create"},on:{click:t.editUtil}},[t._v("修改")]),t._v(" "),a("Drawer",{attrs:{width:"800","mask-closable":!1},model:{value:t.creatUnit,callback:function(e){t.creatUnit=e},expression:"creatUnit"}},[a("Creat",{attrs:{editContent:t.editContent,title:t.title},on:{cancelCreateUnit:t.cancel,submitCreateUnit:t.ok}})],1)],1)],1)],1),t._v(" "),a("Card",{staticClass:"m10 min-height",attrs:{"dis-hover":""}},[a("div",{staticClass:"get-scroll-top"},[a("Row",{staticClass:"step-wrapper",class:{"fixed-step-wrapper":t.stepFixed}},[a("Col",{attrs:{span:"20"}},[a("Steps",{attrs:{current:t.current,status:t.stepStatus}},t._l(t.tabList,function(e,i){return a("Step",{key:i,ref:"step"+i,refInFor:!0,class:{"current-step":t.current===t.tabList.length-1,"current-color":t.currentClick===i},attrs:{title:e.name},nativeOn:{click:function(a){t.handleClickStep(i,e)}}})}))],1),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"4"}},[a("ButtonGroup",[a("Button",{staticStyle:{"border-right-color":"#5cadff"},style:{cursor:t.nextBtnType?"default":"pointer"},attrs:{type:"primary"},on:{click:t.next}},[t._v(t._s(t.buttonText))]),t._v(" "),t.nextBtnType?a("Button",{staticStyle:{padding:"0","border-left-color":"#5cadff"},attrs:{type:"primary"}},[a("Dropdown",{attrs:{trigger:"click",placement:"bottom-end"}},[a("div",{staticStyle:{padding:"6px 12px"}},[a("Icon",{attrs:{type:"md-more"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[t._v("\n                                            暂停\n                                        ")]),t._v(" "),a("DropdownItem",[t._v("\n                                            结束\n                                        ")])],1)],1)],1):t._e()],1)],1)],1)],1),t._v(" "),a("Divider"),t._v(" "),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("div",{staticClass:"relative-top"},[a(t.tabView,{tag:"component"})],1)])],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")($,L,!1,function(t){a("rEVX"),a("kyJn")},"data-v-7e88b8be",null);e.default=I.exports},E4yA:function(t,e){},EI0F:function(t,e){},P0NS:function(t,e){},kyJn:function(t,e){},oop6:function(t,e){},rEVX:function(t,e){},y5lb:function(t,e,a){"use strict";var i=a("mvHQ"),s=a.n(i),n=a("CFN8"),l={props:{editContent:{type:Object,default:function(){return{}}},title:{type:String,default:function(){return""}}},data:function(){return{formValidate:{activity:this.editContent.activity||"",name:this.editContent.name||"",marketingType:this.editContent.marketingType||"",interactiveType:this.editContent.interactiveType?""+this.editContent.interactiveType:"",putType:this.editContent.putType||[],description:this.editContent.description||""},ruleValidate:{activity:[{required:!0,message:"请选择所属活动",trigger:"change"}],name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{pattern:this.$config.reg_input.reg,message:this.$config.reg_input.msg,trigger:"blur"}],interactiveType:[{required:!0,message:"请选择交互类型",trigger:"change"}],description:[{required:!0,message:"请选择交互类型",trigger:"blur"}]},activityList:[{label:"年货节-超级秒杀日，最低1折起",value:"年货节-超级秒杀日，最低1折起"},{label:"新装抢鲜，呼气春天，春装全面上市",value:"新装抢鲜，呼气春天，春装全面上市"},{label:"四月踏青，魅力出行，缤纷春季购物节",value:"四月踏青，魅力出行，缤纷春季购物节"},{label:"五一钜惠，全场满立减，满包邮，满500送20",value:"五一钜惠，全场满立减，满包邮，满500送20"},{label:"十周年庆，年中放价，全场满618减60",value:"十周年庆，年中放价，全场满618减60"},{label:"夏季初登场，购物送好礼",value:"夏季初登场，购物送好礼"},{label:"仲夏大行动，全场9折起，满150再返20",value:"仲夏大行动，全场9折起，满150再返20"},{label:"开学季-领跑新学期，开学装备特惠专场",value:"开学季-领跑新学期，开学装备特惠专场"},{label:"尽享意外惊喜“国庆购物不花钱”",value:"尽享意外惊喜“国庆购物不花钱”"},{label:"庆圣诞迎元旦 精选商品7折起 满400包邮",value:"庆圣诞迎元旦 精选商品7折起 满400包邮"}],responseType:[{label:"单次通知",value:"0"},{label:"事件响应",value:"1"},{label:"周期性通知",value:"2"},{label:"日期通知",value:"3"},{label:"旅程响应",value:"4"},{label:"旅程通知",value:"5"}],putTypes:[{label:"拉新",value:"拉新"},{label:"促活",value:"促活"}]}},computed:{},components:{editTitle:n.a},mounted:function(){},methods:{changeInteractiveType:function(t){var e=this;"/activity/list"==this.$route.path||this.$Modal.confirm({title:"确定要切换交互类型？",content:"<p>切换交互类型后，将重置投放单元</p>",onOk:function(){e.formValidate.interactiveType=""+t,e.$Message.destroy(),e.$Message.success("已更改")},onCancel:function(){e.formValidate.interactiveType=e.editContent.interactiveType,e.$Message.destroy(),e.$Message.success("取消更改")}})},cancel:function(){this.editContent=={}?this.formValidate={}:this.formValidate=this.editContent,this.$emit("cancelCreateUnit",!1)},ok:function(){var t=this;this.$refs.formValidate.validate(function(e){e&&(t.$config.interactive_type=t.formValidate.interactiveType,t.$emit("submitCreateUnit",!1),"{}"==s()(t.editContent)?t.$router.push({path:"/activity/detail",query:{name:"detail"}}):t.$tools.bus.$emit("handle-click-step",0,!0))})}},watch:{},destroyed:function(){}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mask-bg"},[a("edit-title",{attrs:{title:t.title},on:{"cancel-click":t.cancel,"ok-click":t.ok}})],1),t._v(" "),a("div",{staticClass:"custom-dialog-content "},[a("div",{staticClass:"m20"},[a("Card",{staticStyle:{"padding-bottom":"100px"},attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("基本信息")]),t._v(" "),a("Form",{ref:"formValidate",staticClass:"mt20",staticStyle:{padding:"0 20px"},attrs:{"label-position":"left","label-width":90,model:t.formValidate,rules:t.ruleValidate}},[a("Form-item",{attrs:{label:"所属活动：",prop:"activity"}},[a("Select",{staticClass:"width500",attrs:{placeholder:"请选择所属活动"},model:{value:t.formValidate.activity,callback:function(e){t.$set(t.formValidate,"activity",e)},expression:"formValidate.activity"}},t._l(t.activityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"投放名称：",prop:"name"}},[a("Input",{staticClass:"width500",attrs:{maxlength:20,placeholder:"请输入投放单元名称"},model:{value:t.formValidate.name,callback:function(e){t.$set(t.formValidate,"name","string"==typeof e?e.trim():e)},expression:"formValidate.name"}})],1),t._v(" "),a("Form-item",{attrs:{label:"交互类型：",prop:"interactiveType"}},[a("Select",{staticClass:"width500",attrs:{placeholder:"请选择交互类型"},on:{"on-change":t.changeInteractiveType},model:{value:t.formValidate.interactiveType,callback:function(e){t.$set(t.formValidate,"interactiveType",e)},expression:"formValidate.interactiveType"}},t._l(t.responseType,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:" ",prop:"marketingType"}},[a("RadioGroup",{model:{value:t.formValidate.marketingType,callback:function(e){t.$set(t.formValidate,"marketingType",e)},expression:"formValidate.marketingType"}},[a("Radio",{attrs:{label:"marketing"}},[a("span",[t._v("营销")])]),t._v(" "),a("Tooltip",{attrs:{"max-width":"300",content:"营销投放将启动频次控制、渠道黑白名单、免打扰控制",placement:"right"}},[a("i",{staticClass:"fa fa-question-circle-o",staticStyle:{"margin-left":"-10px"}})]),t._v(" "),a("Radio",{staticClass:"ml10",attrs:{label:"un_marketing"}},[a("span",[t._v("非营销")])])],1),t._v(" "),a("span")],1),t._v(" "),a("Form-item",{attrs:{label:"投放类别：",prop:"putType"}},[a("Select",{staticClass:"width500",attrs:{filterable:"",multiple:"",placeholder:"请选择投放类别"},model:{value:t.formValidate.putType,callback:function(e){t.$set(t.formValidate,"putType",e)},expression:"formValidate.putType"}},t._l(t.putTypes,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("Form-item",{attrs:{label:"描述：",prop:"description"}},[a("Input",{staticClass:"width500",attrs:{maxlength:100,type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请输入活动描述，最多100个字"},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description","string"==typeof e?e.trim():e)},expression:"formValidate.description"}})],1)],1)],1)],1)])])},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(t){a("6Fuc")},"data-v-78528774",null);e.a=r.exports},yH48:function(t,e){},yK4D:function(t,e){},z8m4:function(t,e){}});